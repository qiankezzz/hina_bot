"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([[4174],{35318:function(e,n,a){a.r(n),a.d(n,{MDXContext:function(){return l},MDXProvider:function(){return u},mdx:function(){return N},useMDXComponents:function(){return s},withMDXComponents:function(){return p}});var t=a(27378);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function r(){return r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t])}return e},r.apply(this,arguments)}function m(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function d(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?m(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function o(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)a=r[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=t.createContext({}),p=function(e){return function(n){var a=s(n.components);return t.createElement(e,r({},n,{components:a}))}},s=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):d(d({},n),e)),a},u=function(e){var n=s(e.components);return t.createElement(l.Provider,{value:n},e.children)},x={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},c=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,r=e.originalType,m=e.parentName,l=o(e,["components","mdxType","originalType","parentName"]),p=s(a),u=i,c=p["".concat(m,".").concat(u)]||p[u]||x[u]||r;return a?t.createElement(c,d(d({ref:n},l),{},{components:a})):t.createElement(c,d({ref:n},l))}));function N(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=a.length,m=new Array(r);m[0]=c;var d={};for(var o in n)hasOwnProperty.call(n,o)&&(d[o]=n[o]);d.originalType=e,d.mdxType="string"==typeof e?e:i,m[1]=d;for(var l=2;l<r;l++)m[l]=a[l];return t.createElement.apply(null,m)}return t.createElement.apply(null,a)}c.displayName="MDXCreateElement"},18256:function(e,n,a){a.r(n),a.d(n,{frontMatter:function(){return d},contentTitle:function(){return o},metadata:function(){return l},toc:function(){return p},default:function(){return u}});var t=a(25773),i=a(30808),r=(a(27378),a(35318)),m=["components"],d={sidebar_position:1,description:"\u9879\u76ee\u914d\u7f6e\u65b9\u5f0f\u4e0e\u914d\u7f6e\u9879",options:{menu:{weight:21,category:"guide"}}},o="\u914d\u7f6e",l={unversionedId:"tutorial/configuration",id:"version-2.0.0rc3/tutorial/configuration",isDocsHomePage:!1,title:"\u914d\u7f6e",description:"\u9879\u76ee\u914d\u7f6e\u65b9\u5f0f\u4e0e\u914d\u7f6e\u9879",source:"@site/versioned_docs/version-2.0.0rc3/tutorial/configuration.md",sourceDirName:"tutorial",slug:"/tutorial/configuration",permalink:"/website/docs/tutorial/configuration",editUrl:"https://github.com/nonebot/nonebot2/edit/master/website/versioned_docs/version-2.0.0rc3/tutorial/configuration.md",tags:[],version:"2.0.0rc3",lastUpdatedBy:"github-actions[bot]",lastUpdatedAt:1674375446,formattedLastUpdatedAt:"2023/1/22",sidebarPosition:1,frontMatter:{sidebar_position:1,description:"\u9879\u76ee\u914d\u7f6e\u65b9\u5f0f\u4e0e\u914d\u7f6e\u9879",options:{menu:{weight:21,category:"guide"}}},sidebar:"version-2.0.0rc3/tutorial",previous:{title:"\u521b\u5efa\u9879\u76ee",permalink:"/website/docs/tutorial/create-project"},next:{title:"\u9009\u62e9\u9a71\u52a8\u5668",permalink:"/website/docs/tutorial/choose-driver"}},p=[{value:"\u914d\u7f6e\u65b9\u5f0f",id:"\u914d\u7f6e\u65b9\u5f0f",children:[{value:".env \u6587\u4ef6",id:"env-\u6587\u4ef6",children:[],level:3},{value:".env.* \u6587\u4ef6",id:"env-\u6587\u4ef6-1",children:[],level:3},{value:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf",id:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf",children:[],level:3},{value:"bot.py \u6587\u4ef6",id:"botpy-\u6587\u4ef6",children:[],level:3}],level:2},{value:"\u914d\u7f6e\u4f18\u5148\u7ea7",id:"\u914d\u7f6e\u4f18\u5148\u7ea7",children:[],level:2},{value:"\u8bfb\u53d6\u914d\u7f6e\u9879",id:"\u8bfb\u53d6\u914d\u7f6e\u9879",children:[],level:2},{value:"\u8be6\u7ec6\u914d\u7f6e\u9879",id:"\u8be6\u7ec6\u914d\u7f6e\u9879",children:[{value:"Driver",id:"driver",children:[],level:3},{value:"Host",id:"host",children:[],level:3},{value:"Port",id:"port",children:[],level:3},{value:"Log Level",id:"log-level",children:[],level:3},{value:"API Timeout",id:"api-timeout",children:[],level:3},{value:"SuperUsers",id:"superusers",children:[],level:3},{value:"Nickname",id:"nickname",children:[],level:3},{value:"Command Start \u548c Command Separator",id:"command-start-\u548c-command-separator",children:[],level:3},{value:"Session Expire Timeout",id:"session-expire-timeout",children:[],level:3}],level:2}],s={toc:p};function u(e){var n=e.components,a=(0,i.Z)(e,m);return(0,r.mdx)("wrapper",(0,t.Z)({},s,a,{components:n,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"\u914d\u7f6e"},"\u914d\u7f6e"),(0,r.mdx)("p",null,"\u5728\u4e0a\u4e00\u7ae0\u8282\u4e2d\uff0c\u6211\u4eec\u521b\u5efa\u4e86\u9ed8\u8ba4\u7684\u9879\u76ee\u7ed3\u6784\uff0c\u5176\u4e2d ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u548c ",(0,r.mdx)("inlineCode",{parentName:"p"},".env.*")," \u5747\u4e3a\u9879\u76ee\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4e0b\u9762\u5c06\u4ecb\u7ecd\u51e0\u79cd NoneBot \u914d\u7f6e\u65b9\u5f0f\u4ee5\u53ca\u914d\u7f6e\u9879\u3002"),(0,r.mdx)("div",{className:"admonition admonition-danger alert alert--danger"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"\u8b66\u544a")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"\u8bf7\u52ff\u5c06\u654f\u611f\u4fe1\u606f\u5199\u5165\u914d\u7f6e\u6587\u4ef6\u5e76\u63d0\u4ea4\u81f3\u5f00\u6e90\u4ed3\u5e93\uff01"))),(0,r.mdx)("h2",{id:"\u914d\u7f6e\u65b9\u5f0f"},"\u914d\u7f6e\u65b9\u5f0f"),(0,r.mdx)("h3",{id:"env-\u6587\u4ef6"},".env \u6587\u4ef6"),(0,r.mdx)("p",null,"NoneBot \u5728\u542f\u52a8\u65f6\u5c06\u4f1a\u4ece\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6216\u8005 ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u6587\u4ef6\u4e2d\u5bfb\u627e\u53d8\u91cf ",(0,r.mdx)("inlineCode",{parentName:"p"},"ENVIRONMENT"),"\uff08\u5927\u5c0f\u5199\u4e0d\u654f\u611f\uff09\uff0c\u9ed8\u8ba4\u503c\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"prod"),"\u3002",(0,r.mdx)("br",{parentName:"p"}),"\n","\u8fd9\u5c06\u5f15\u5bfc NoneBot \u4ece\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u6216\u8005 ",(0,r.mdx)("inlineCode",{parentName:"p"},".env.{ENVIRONMENT}")," \u6587\u4ef6\u4e2d\u8fdb\u4e00\u6b65\u52a0\u8f7d\u5177\u4f53\u914d\u7f6e\u3002"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u6587\u4ef6\u662f\u57fa\u7840\u73af\u5883\u914d\u7f6e\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u9879\u5728\u4e0d\u540c\u73af\u5883\u4e0b\u90fd\u4f1a\u88ab\u52a0\u8f7d\uff0c\u4f46\u4f1a\u88ab ",(0,r.mdx)("inlineCode",{parentName:"p"},".env.{ENVIRONMENT}")," \u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\u6240\u8986\u76d6\u3002"),(0,r.mdx)("p",null,"NoneBot \u4f7f\u7528 ",(0,r.mdx)("a",{parentName:"p",href:"https://pydantic-docs.helpmanual.io/"},"Pydantic")," \u8fdb\u884c\u914d\u7f6e\u5904\u7406\uff0c\u5e76\u5bf9 Pydantic \u7684\u884c\u4e3a\u505a\u51fa\u4e86\u66f4\u6539\uff0c\u8be6\u89c1\u4e0b\u65b9\u8bf4\u660e\u3002"),(0,r.mdx)("p",null,"\u73b0\u5728\uff0c\u6211\u4eec\u5728 ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u6587\u4ef6\u4e2d\u5199\u5165\u5f53\u524d\u73af\u5883\u4fe1\u606f\uff1a"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},"# .env\nENVIRONMENT=dev\nCUSTOM_CONFIG=common config  # \u8fd9\u4e2a\u914d\u7f6e\u9879\u5728\u4efb\u4f55\u73af\u5883\u4e2d\u90fd\u4f1a\u88ab\u52a0\u8f7d\n")),(0,r.mdx)("p",null,"\u5982\u4f60\u6240\u60f3\uff0c\u4e4b\u540e NoneBot \u5c31\u4f1a\u4ece ",(0,r.mdx)("inlineCode",{parentName:"p"},".env.dev")," \u6587\u4ef6\u4e2d\u52a0\u8f7d\u73af\u5883\u53d8\u91cf\u3002"),(0,r.mdx)("div",{className:"admonition admonition-important alert alert--info"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u53c2\u8003\u6587\u6863")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u76f8\u5173\u6587\u4ef6\u7684\u52a0\u8f7d\u4f7f\u7528 ",(0,r.mdx)("inlineCode",{parentName:"p"},"dotenv")," \u8bed\u6cd5\uff0c\u8bf7\u53c2\u8003 ",(0,r.mdx)("a",{parentName:"p",href:"https://saurabh-kumar.com/python-dotenv/"},(0,r.mdx)("inlineCode",{parentName:"a"},"dotenv")," \u6587\u6863")))),(0,r.mdx)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"\u63d0\u793a")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"\u7531\u4e8e Pydantic \u4f7f\u7528 JSON \u89e3\u6790\u914d\u7f6e\u9879\uff0c\u8bf7\u786e\u4fdd\u914d\u7f6e\u9879\u503c\u4e3a JSON \u683c\u5f0f\u7684\u6570\u636e\u3002\u5982\uff1a"),(0,r.mdx)("pre",{parentName:"div"},(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},'list=["123456789", "987654321", 1]\ntest={"hello": "world"}\n')),(0,r.mdx)("p",{parentName:"div"},"\u5982\u679c\u914d\u7f6e\u9879\u503c\u89e3\u6790\u5931\u8d25\u5c06\u4f5c\u4e3a",(0,r.mdx)("strong",{parentName:"p"},"\u5b57\u7b26\u4e32"),"\u5904\u7406\u3002"),(0,r.mdx)("p",{parentName:"div"},"\u7279\u522b\u7684\uff0c\u5982\u679c\u914d\u7f6e\u9879",(0,r.mdx)("strong",{parentName:"p"},"\u4e3a\u7a7a"),"\uff0c\u5219\u4f1a\u4ece",(0,r.mdx)("strong",{parentName:"p"},"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"),"\u4e2d\u83b7\u53d6\u503c\uff0c\u5982\u679c\u4e0d\u5b58\u5728\u5219\u4e3a\u7a7a\u5b57\u7b26\u4e32\u3002"))),(0,r.mdx)("h3",{id:"env-\u6587\u4ef6-1"},".env.","*"," \u6587\u4ef6"),(0,r.mdx)("p",null,"NoneBot \u9ed8\u8ba4\u4f1a\u4ece ",(0,r.mdx)("inlineCode",{parentName:"p"},".env.{ENVIRONMENT}")," \u6587\u4ef6\u52a0\u8f7d\u914d\u7f6e\uff0c\u4f46\u662f\u53ef\u4ee5\u5728 NoneBot \u521d\u59cb\u5316\u65f6\u6307\u5b9a\u52a0\u8f7d\u67d0\u4e2a\u73af\u5883\u914d\u7f6e\u6587\u4ef6\uff1a",(0,r.mdx)("inlineCode",{parentName:"p"},'nonebot.init(_env_file=".env.dev")'),"\uff0c\u8fd9\u5c06\u5ffd\u7565\u4f60\u5728 ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u4e2d\u8bbe\u7f6e\u7684 ",(0,r.mdx)("inlineCode",{parentName:"p"},"ENVIRONMENT")," \u3002"),(0,r.mdx)("p",null,"\u914d\u7f6e\u8bed\u6cd5\u4e0e ",(0,r.mdx)("inlineCode",{parentName:"p"},".env")," \u6587\u4ef6\u76f8\u540c\u3002"),(0,r.mdx)("p",null,"\u793a\u4f8b\u53ca\u8bf4\u660e\uff1a"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-bash"},'HOST=0.0.0.0  # \u914d\u7f6e NoneBot2 \u76d1\u542c\u7684 IP/\u4e3b\u673a\u540d\nPORT=8080  # \u914d\u7f6e NoneBot2 \u76d1\u542c\u7684\u7aef\u53e3\nSUPERUSERS=["123456789", "987654321"]  # \u914d\u7f6e NoneBot \u8d85\u7ea7\u7528\u6237\nNICKNAME=["awesome", "bot"]  # \u914d\u7f6e\u673a\u5668\u4eba\u7684\u6635\u79f0\nCOMMAND_START=["/", ""]  # \u914d\u7f6e\u547d\u4ee4\u8d77\u59cb\u5b57\u7b26\nCOMMAND_SEP=["."]  # \u914d\u7f6e\u547d\u4ee4\u5206\u5272\u5b57\u7b26\n\n# Custom Configs\nCUSTOM_CONFIG1="config in env file"\nCUSTOM_CONFIG2=  # \u7559\u7a7a\u5219\u4ece\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u8bfb\u53d6\uff0c\u5982\u4e0d\u5b58\u5728\u5219\u4e3a\u7a7a\u5b57\u7b26\u4e32\n')),(0,r.mdx)("p",null,"\u8be6\u7ec6\u7684\u914d\u7f6e\u9879\u53ef\u4ee5\u53c2\u8003",(0,r.mdx)("a",{parentName:"p",href:"#%E8%AF%A6%E7%BB%86%E9%85%8D%E7%BD%AE%E9%A1%B9"},"\u914d\u7f6e\u9879"),"\u3002"),(0,r.mdx)("h3",{id:"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"},"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf"),(0,r.mdx)("p",null,"\u5982\u679c\u5728\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u4e2d\u5b9a\u4e49\u4e86\u914d\u7f6e\uff0c\u5219\u4e00\u6837\u4f1a\u88ab\u8bfb\u53d6\u3002"),(0,r.mdx)("h3",{id:"botpy-\u6587\u4ef6"},"bot.py \u6587\u4ef6"),(0,r.mdx)("p",null,"\u914d\u7f6e\u9879\u4e5f\u53ef\u4ee5\u5728 NoneBot \u521d\u59cb\u5316\u65f6\u4f20\u5165\u3002\u6b64\u5904\u53ef\u4ee5\u4f20\u5165\u4efb\u610f\u5408\u6cd5 Python \u53d8\u91cf\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5728\u521d\u59cb\u5316\u5b8c\u6210\u540e\u4fee\u6539\u6216\u65b0\u589e\u3002"),(0,r.mdx)("p",null,"\u793a\u4f8b\uff1a"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-python"},'# bot.py\nimport nonebot\n\nnonebot.init(custom_config3="config on init")\n\nconfig = nonebot.get_driver().config\nconfig.custom_config3 = "changed after init"\nconfig.custom_config4 = "new config after init"\n')),(0,r.mdx)("h2",{id:"\u914d\u7f6e\u4f18\u5148\u7ea7"},"\u914d\u7f6e\u4f18\u5148\u7ea7"),(0,r.mdx)("p",null,(0,r.mdx)("inlineCode",{parentName:"p"},"bot.py")," \u6587\u4ef6\uff08",(0,r.mdx)("inlineCode",{parentName:"p"},"nonebot.init"),"\uff09> \u7cfb\u7edf\u73af\u5883\u53d8\u91cf > ",(0,r.mdx)("inlineCode",{parentName:"p"},".env"),"\u3001",(0,r.mdx)("inlineCode",{parentName:"p"},".env.*")," \u6587\u4ef6"),(0,r.mdx)("h2",{id:"\u8bfb\u53d6\u914d\u7f6e\u9879"},"\u8bfb\u53d6\u914d\u7f6e\u9879"),(0,r.mdx)("p",null,"\u914d\u7f6e\u9879\u53ef\u4ee5\u901a\u8fc7\u4e09\u79cd\u7c7b\u578b\u7684\u5bf9\u8c61\u83b7\u53d6\uff1a",(0,r.mdx)("inlineCode",{parentName:"p"},"driver"),"\u3001",(0,r.mdx)("inlineCode",{parentName:"p"},"adapter"),"\u3001",(0,r.mdx)("inlineCode",{parentName:"p"},"bot"),"\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-python"},'import nonebot\n# driver\nnonebot.get_driver().config.custom_config\n# bot\nnonebot.get_bot().config.custom_config\n# adapter\nnonebot.get_driver()._adapters["adapter_name"].config.custom_config\n')),(0,r.mdx)("h2",{id:"\u8be6\u7ec6\u914d\u7f6e\u9879"},"\u8be6\u7ec6\u914d\u7f6e\u9879"),(0,r.mdx)("p",null,"\u914d\u7f6e\u9879\u7684 API \u6587\u6863\u53ef\u4ee5\u524d\u5f80 ",(0,r.mdx)("a",{parentName:"p",href:"/website/docs/api/config#class-config"},"Class Config")," \u67e5\u770b\u3002"),(0,r.mdx)("h3",{id:"driver"},"Driver"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"str")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},'"~fastapi"'))),(0,r.mdx)("p",null,"NoneBot2 \u8fd0\u884c\u6240\u4f7f\u7528\u7684\u9a71\u52a8\u5668\u3002\u4e3b\u8981\u5206\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"ForwardDriver"),"\u3001",(0,r.mdx)("inlineCode",{parentName:"p"},"ReverseDriver")," \u5373\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u4e24\u7c7b\u3002"),(0,r.mdx)("p",null,"\u914d\u7f6e\u683c\u5f0f\u91c7\u7528\u7279\u6b8a\u8bed\u6cd5\uff1a",(0,r.mdx)("inlineCode",{parentName:"p"},"<module>[:<Driver>][+<module>[:<Mixin>]]*")),(0,r.mdx)("p",null,"\u5176\u4e2d ",(0,r.mdx)("inlineCode",{parentName:"p"},"<module>")," \u4e3a\u9a71\u52a8\u5668\u6a21\u5757\u540d\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,r.mdx)("inlineCode",{parentName:"p"},"~")," \u4f5c\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"nonebot.drivers.")," \u7684\u7b80\u5199\uff1b",(0,r.mdx)("inlineCode",{parentName:"p"},"<Driver>")," \u4e3a\u9a71\u52a8\u5668\u7c7b\u540d\uff0c\u9ed8\u8ba4\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"Driver"),"\uff1b",(0,r.mdx)("inlineCode",{parentName:"p"},"<Mixin>")," \u4e3a\u9a71\u52a8\u5668\u6df7\u5165\u7684\u7c7b\u540d\uff0c\u9ed8\u8ba4\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"Mixin"),"\u3002"),(0,r.mdx)("p",null,"NoneBot2 \u5185\u7f6e\u4e86\u51e0\u4e2a\u5e38\u7528\u9a71\u52a8\u5668\uff0c\u5305\u62ec\u4e86\u5404\u7c7b\u5e38\u7528\u529f\u80fd\uff0c\u5e38\u89c1\u9a71\u52a8\u5668\u914d\u7f6e\u5982\u4e0b\uff1a"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"DRIVER=~fastapi\nDRIVER=~httpx+~websockets\nDRIVER=~fastapi+~httpx+~websockets\nDRIVER=~fastapi+~aiohttp\n")),(0,r.mdx)("p",null,"\u5404\u9a71\u52a8\u5668\u7684\u529f\u80fd\u4e0e\u533a\u522b\u8bf7\u53c2\u8003",(0,r.mdx)("a",{parentName:"p",href:"/website/docs/tutorial/choose-driver"},"\u9009\u62e9\u9a71\u52a8\u5668"),"\u3002"),(0,r.mdx)("h3",{id:"host"},"Host"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"IPvAnyAddress")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"127.0.0.1"))),(0,r.mdx)("p",null,"\u4f7f\u7528 ",(0,r.mdx)("inlineCode",{parentName:"p"},"ReversedDriver")," \u65f6\uff0cNoneBot2 \u76d1\u542c\u7684 IP/\u4e3b\u673a\u540d\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"HOST=127.0.0.1\n")),(0,r.mdx)("h3",{id:"port"},"Port"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"int")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"8080"))),(0,r.mdx)("p",null,"\u4f7f\u7528 ",(0,r.mdx)("inlineCode",{parentName:"p"},"ReversedDriver")," \u65f6\uff0cNoneBot2 \u76d1\u542c\u7684\u7aef\u53e3\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"PORT=8080\n")),(0,r.mdx)("h3",{id:"log-level"},"Log Level"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"int | str")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"INFO"))),(0,r.mdx)("p",null,"NoneBot2 \u65e5\u5fd7\u8f93\u51fa\u7b49\u7ea7\uff0c\u53ef\u4ee5\u4e3a ",(0,r.mdx)("inlineCode",{parentName:"p"},"int")," \u7c7b\u578b\u7b49\u7ea7\u6216\u7b49\u7ea7\u540d\u79f0"),(0,r.mdx)("p",null,"\u53c2\u8003 ",(0,r.mdx)("a",{parentName:"p",href:"https://loguru.readthedocs.io/en/stable/api/logger.html#levels"},(0,r.mdx)("inlineCode",{parentName:"a"},"loguru \u65e5\u5fd7\u7b49\u7ea7")),"\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"LOG_LEVEL=INFO\n")),(0,r.mdx)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.mdx)("div",{parentName:"div",className:"admonition-heading"},(0,r.mdx)("h5",{parentName:"div"},(0,r.mdx)("span",{parentName:"h5",className:"admonition-icon"},(0,r.mdx)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.mdx)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u63d0\u793a")),(0,r.mdx)("div",{parentName:"div",className:"admonition-content"},(0,r.mdx)("p",{parentName:"div"},"\u65e5\u5fd7\u7b49\u7ea7\u540d\u79f0\u5e94\u4e3a\u5927\u5199\uff0c\u5982 ",(0,r.mdx)("inlineCode",{parentName:"p"},"INFO"),"\u3002"))),(0,r.mdx)("h3",{id:"api-timeout"},"API Timeout"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"Optional[float]")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"30.0"))),(0,r.mdx)("p",null,"API \u8bf7\u6c42\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4d\u4e3a\u79d2\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"API_TIMEOUT=30.0\n")),(0,r.mdx)("h3",{id:"superusers"},"SuperUsers"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"Set[str]")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"set()"))),(0,r.mdx)("p",null,"\u673a\u5668\u4eba\u8d85\u7ea7\u7528\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528\u6743\u9650 ",(0,r.mdx)("a",{parentName:"p",href:"/website/docs/api/permission#SUPERUSER"},(0,r.mdx)("inlineCode",{parentName:"a"},"SUPERUSER")),"\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},'SUPERUSERS=["1234567890"]\n')),(0,r.mdx)("h3",{id:"nickname"},"Nickname"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"Set[str]")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"set()"))),(0,r.mdx)("p",null,"\u673a\u5668\u4eba\u6635\u79f0\uff0c\u901a\u5e38\u534f\u8bae\u9002\u914d\u5668\u4f1a\u6839\u636e\u7528\u6237\u662f\u5426 @user \u6216\u8005\u662f\u5426\u4ee5\u673a\u5668\u4eba\u6635\u79f0\u5f00\u5934\u6765\u5224\u65ad\u662f\u5426\u662f\u5411\u673a\u5668\u4eba\u53d1\u9001\u7684\u6d88\u606f\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},'NICKNAME=["bot"]\n')),(0,r.mdx)("h3",{id:"command-start-\u548c-command-separator"},"Command Start \u548c Command Separator"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"Set[str]")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),":",(0,r.mdx)("ul",{parentName:"li"},(0,r.mdx)("li",{parentName:"ul"},"Command Start: ",(0,r.mdx)("inlineCode",{parentName:"li"},'{"/"}')),(0,r.mdx)("li",{parentName:"ul"},"Command Separator: ",(0,r.mdx)("inlineCode",{parentName:"li"},'{"."}'))))),(0,r.mdx)("p",null,"\u547d\u4ee4\u6d88\u606f\u7684\u8d77\u59cb\u7b26\u548c\u5206\u9694\u7b26\u3002\u7528\u4e8e ",(0,r.mdx)("a",{parentName:"p",href:"/website/docs/api/rule#command"},(0,r.mdx)("inlineCode",{parentName:"a"},"command"))," \u89c4\u5219\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},'COMMAND_START=["/", "!"]\nCOMMAND_SEP=[".", "/"]\n')),(0,r.mdx)("h3",{id:"session-expire-timeout"},"Session Expire Timeout"),(0,r.mdx)("ul",null,(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u7c7b\u578b"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"timedelta")),(0,r.mdx)("li",{parentName:"ul"},(0,r.mdx)("strong",{parentName:"li"},"\u9ed8\u8ba4\u503c"),": ",(0,r.mdx)("inlineCode",{parentName:"li"},"timedelta(minutes=2)"))),(0,r.mdx)("p",null,"\u7528\u6237\u4f1a\u8bdd\u8d85\u65f6\u65f6\u95f4\uff0c\u914d\u7f6e\u683c\u5f0f\u53c2\u8003 ",(0,r.mdx)("a",{parentName:"p",href:"https://pydantic-docs.helpmanual.io/usage/types/#datetime-types"},"Datetime Types"),"\u3002"),(0,r.mdx)("pre",null,(0,r.mdx)("code",{parentName:"pre",className:"language-env"},"SESSION_EXPIRE_TIMEOUT=120\n")))}u.isMDXComponent=!0}}]);