"use strict";(self.webpackChunknonebot=self.webpackChunknonebot||[]).push([[9453],{35318:function(e,t,n){n.r(t),n.d(t,{MDXContext:function(){return c},MDXProvider:function(){return d},mdx:function(){return g},useMDXComponents:function(){return u},withMDXComponents:function(){return m}});var r=n(27378);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),m=function(e){return function(t){var n=u(t.components);return r.createElement(e,s({},t,{components:n}))}},u=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(c.Provider,{value:t},e.children)},f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,s=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=a,p=m["".concat(o,".").concat(d)]||m[d]||f[d]||s;return n?r.createElement(p,l(l({ref:t},c),{},{components:n})):r.createElement(p,l({ref:t},c))}));function g(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var s=n.length,o=new Array(s);o[0]=p;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<s;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},94733:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=d(n(27378)),a=d(n(81884)),s=d(n(13699)),o=d(n(13817)),l=d(n(98948)),i=d(n(75402)),c=d(n(50353)),m=d(n(38944)),u=["className","imageClassName","disabled","children"];function d(e){return e&&e.__esModule?e:{default:e}}function f(){return f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var g=function(e){var t,n=e.className,d=e.imageClassName,g=e.disabled,v=e.children,h=p(e,u),b=(0,c.default)().siteConfig.title,_=(0,i.default)().logo,y=void 0===_?{src:""}:_,x=(0,l.default)(y.href||"/"),w={light:(0,l.default)(y.src),dark:(0,l.default)(y.srcDark||y.src)};return r.default.createElement(a.default,f({to:x,className:(0,m.default)(n,(t={},t[s.default.disabled]=g,t))},h,y.target&&{target:y.target}),y.src&&r.default.createElement(o.default,{className:d,sources:w,alt:y.alt||b}),v)};t.default=g},13817:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=c(n(38944)),a=c(n(27378)),s=c(n(76457)),o=c(n(63159)),l=c(n(13971)),i=["sources","className","alt"];function c(e){return e&&e.__esModule?e:{default:e}}function m(){return m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},m.apply(this,arguments)}function u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var d=function(e){var t=(0,s.default)(),n=(0,o.default)().isDarkTheme,c=e.sources,d=e.className,f=void 0===d?"":d,p=e.alt,g=void 0===p?"":p,v=u(e,i),h=t?n?["dark"]:["light"]:["light","dark"];return a.default.createElement(a.default.Fragment,null,h.map((function(e){return a.default.createElement("img",m({key:e,src:c[e],alt:g,className:(0,r.default)(l.default.themedImage,l.default["themedImage--"+e],f)},v))})))};t.default=d},81355:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(38944),a=n(27378),s=n(92739),o=n(94733),l="message_SmOn",i="messageRight_N4I+",c="messageAvatar_1jlm",m="messageBox_ajkE";function u(e){var t,n=e.msg,u=e.isRight;return a.createElement("div",{className:(0,r.default)(l,(t={},t[i]=u,t))},u?a.createElement("div",{className:(0,r.default)("bg-cyan-600 text-base",c)},a.createElement(s.FontAwesomeIcon,{icon:["fas","user"]})):a.createElement("div",{className:(0,r.default)("transparent",c)},a.createElement(o.default,{imageClassName:"h-full w-full",disabled:!0})),a.createElement("div",{className:(0,r.default)(m,{"order-first":u}),dangerouslySetInnerHTML:{__html:n.replace(/\n/g,"<br/>").replace(/ /g,"&nbsp;")}}))}function d(e){var t=e.msgs,n=void 0===t?[]:t,r=function(e){return"right"===e.position};return a.createElement("div",{className:"block w-full max-w-full my-4 rounded shadow-md outline-none no-underline bg-light-nonepress-100 dark:bg-dark-nonepress-100"},a.createElement("header",{className:"flex items-center h-12 px-4 bg-blue-500 text-white rounded-t-[inherit]"},a.createElement("div",{className:"text-left text-base grow"},a.createElement(s.FontAwesomeIcon,{icon:["fas","chevron-left"]})),a.createElement("div",{className:"flex-initial grow-0"},a.createElement("span",{className:"text-xl font-bold"},"NoneBot")),a.createElement("div",{className:"text-right text-base grow"},a.createElement(s.FontAwesomeIcon,{icon:["fas","user"]}))),a.createElement("div",{className:"p-3 min-h-[150px]"},n.map((function(e,t){return a.createElement(u,{msg:e.msg,isRight:r(e),key:t})}))),a.createElement("div",{className:"px-3"},a.createElement("div",{className:"flex flex-row items-center"},a.createElement("div",{className:"flex-1 p-1 max-w-full"},a.createElement("input",{className:"w-full rounded bg-light dark:bg-dark"})),a.createElement("div",{className:"flex-initial grow-0 w-fit"},a.createElement("button",{className:"h-7 px-3 rounded-full bg-blue-500 text-white"},a.createElement("span",null,"\u53d1\u9001")))),a.createElement("div",{className:"flex flex-row items-center text-center text-base text-gray-600"},a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","microphone"]})),a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","image"]})),a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","camera"]})),a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","wallet"]})),a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","smile-wink"]})),a.createElement("div",{className:"p-1 shrink-0 grow-0 basis-1/6"},a.createElement(s.FontAwesomeIcon,{icon:["fas","plus-circle"]})))))}},57560:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return u},contentTitle:function(){return d},metadata:function(){return f},toc:function(){return p},default:function(){return v}});var r=n(25773),a=n(30808),s=(n(27378),n(35318)),o=n(53392),l=n(81355),i=n(28683),c=n(89156),m=["components"],u={sidebar_position:6,description:"\u7b80\u5355\u63d2\u4ef6\u793a\u4f8b"},d="\u63d2\u4ef6\u793a\u4f8b",f={unversionedId:"tutorial/plugin/example",id:"version-2.0.0rc3/tutorial/plugin/example",isDocsHomePage:!1,title:"\u63d2\u4ef6\u793a\u4f8b",description:"\u7b80\u5355\u63d2\u4ef6\u793a\u4f8b",source:"@site/versioned_docs/version-2.0.0rc3/tutorial/plugin/example.mdx",sourceDirName:"tutorial/plugin",slug:"/tutorial/plugin/example",permalink:"/website/docs/tutorial/plugin/example",editUrl:"https://github.com/nonebot/nonebot2/edit/master/website/versioned_docs/version-2.0.0rc3/tutorial/plugin/example.mdx",tags:[],version:"2.0.0rc3",lastUpdatedBy:"github-actions[bot]",lastUpdatedAt:1674375446,formattedLastUpdatedAt:"2023/1/22",sidebarPosition:6,frontMatter:{sidebar_position:6,description:"\u7b80\u5355\u63d2\u4ef6\u793a\u4f8b"},sidebar:"version-2.0.0rc3/tutorial",previous:{title:"\u4e8b\u4ef6\u54cd\u5e94\u5668\u64cd\u4f5c",permalink:"/website/docs/tutorial/plugin/matcher-operation"},next:{title:"\u8c03\u7528\u5e73\u53f0 API",permalink:"/website/docs/tutorial/call-api"}},p=[{value:"\u547d\u4ee4\u5f0f\u95ee\u7b54\u793a\u4f8b",id:"\u547d\u4ee4\u5f0f\u95ee\u7b54\u793a\u4f8b",children:[],level:2}],g={toc:p};function v(e){var t=e.components,n=(0,a.Z)(e,m);return(0,s.mdx)("wrapper",(0,r.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,s.mdx)("h1",{id:"\u63d2\u4ef6\u793a\u4f8b"},"\u63d2\u4ef6\u793a\u4f8b"),(0,s.mdx)("h2",{id:"\u547d\u4ee4\u5f0f\u95ee\u7b54\u793a\u4f8b"},"\u547d\u4ee4\u5f0f\u95ee\u7b54\u793a\u4f8b"),(0,s.mdx)(o.default,{className:"language-python",mdxType:"CodeBlock"},i.Z),(0,s.mdx)(l.Z,{msgs:[{position:"right",msg:"/\u5929\u6c14"},{position:"left",msg:"\u4f60\u60f3\u67e5\u8be2\u54ea\u4e2a\u57ce\u5e02\u7684\u5929\u6c14\u5462\uff1f"},{position:"right",msg:"\u4e0a\u6d77"},{position:"left",msg:"\u4e0a\u6d77\u7684\u5929\u6c14\u662f..."}],mdxType:"Messenger"}),(0,s.mdx)("details",null,(0,s.mdx)("summary",null,"\u6d4b\u8bd5\u793a\u4f8b"),(0,s.mdx)(o.default,{className:"language-python",mdxType:"CodeBlock"},c.Z)))}v.isMDXComponent=!0},13699:function(e,t,n){n.r(t),t.default={disabled:"disabled_2ySB"}},13971:function(e,t,n){n.r(t),t.default={themedImage:"themedImage_3Beg","themedImage--light":"themedImage--light_NZVv","themedImage--dark":"themedImage--dark_LdRg"}},28683:function(e,t){t.Z='from nonebot import on_command\nfrom nonebot.rule import to_me\nfrom nonebot.matcher import Matcher\nfrom nonebot.adapters import Message\nfrom nonebot.params import Arg, CommandArg, ArgPlainText\n\nweather = on_command("weather", rule=to_me(), aliases={"\u5929\u6c14", "\u5929\u6c14\u9884\u62a5"}, priority=5)\n\n\n@weather.handle()\nasync def handle_first_receive(matcher: Matcher, args: Message = CommandArg()):\n    plain_text = args.extract_plain_text()  # \u9996\u6b21\u53d1\u9001\u547d\u4ee4\u65f6\u8ddf\u968f\u7684\u53c2\u6570\uff0c\u4f8b\uff1a/\u5929\u6c14 \u4e0a\u6d77\uff0c\u5219args\u4e3a\u4e0a\u6d77\n    if plain_text:\n        matcher.set_arg("city", args)  # \u5982\u679c\u7528\u6237\u53d1\u9001\u4e86\u53c2\u6570\u5219\u76f4\u63a5\u8d4b\u503c\n\n\n@weather.got("city", prompt="\u4f60\u60f3\u67e5\u8be2\u54ea\u4e2a\u57ce\u5e02\u7684\u5929\u6c14\u5462\uff1f")\nasync def handle_city(city: Message = Arg(), city_name: str = ArgPlainText("city")):\n    if city_name not in ["\u5317\u4eac", "\u4e0a\u6d77"]:  # \u5982\u679c\u53c2\u6570\u4e0d\u7b26\u5408\u8981\u6c42\uff0c\u5219\u63d0\u793a\u7528\u6237\u91cd\u65b0\u8f93\u5165\n        # \u53ef\u4ee5\u4f7f\u7528\u5e73\u53f0\u7684 Message \u7c7b\u76f4\u63a5\u6784\u9020\u6a21\u677f\u6d88\u606f\n        await weather.reject(city.template("\u4f60\u60f3\u67e5\u8be2\u7684\u57ce\u5e02 {city} \u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01"))\n\n    city_weather = await get_weather(city_name)\n    await weather.finish(city_weather)\n\n\n# \u5728\u8fd9\u91cc\u7f16\u5199\u83b7\u53d6\u5929\u6c14\u4fe1\u606f\u7684\u51fd\u6570\nasync def get_weather(city: str) -> str:\n    return f"{city}\u7684\u5929\u6c14\u662f..."\n'},89156:function(e,t){t.Z='import pytest\nfrom nonebug import App\n\n\n@pytest.mark.asyncio\nasync def test_weather(app: App, load_example):\n    from examples.weather import weather\n    from utils import make_fake_event, make_fake_message\n\n    # \u5c06\u6b64\u5904\u7684 make_fake_message() \u66ff\u6362\u4e3a\u4f60\u8981\u53d1\u9001\u7684\u5e73\u53f0\u6d88\u606f Message \u7c7b\u578b\n    Message = make_fake_message()\n\n    async with app.test_matcher(weather) as ctx:\n        bot = ctx.create_bot()\n\n        msg = Message("/\u5929\u6c14 \u4e0a\u6d77")\n        # \u5c06\u6b64\u5904\u7684 make_fake_event() \u66ff\u6362\u4e3a\u4f60\u8981\u53d1\u9001\u7684\u5e73\u53f0\u4e8b\u4ef6 Event \u7c7b\u578b\n        event = make_fake_event(_message=msg, _to_me=True)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(event, "\u4e0a\u6d77\u7684\u5929\u6c14\u662f...", True)\n        ctx.should_finished()\n\n    async with app.test_matcher(weather) as ctx:\n        bot = ctx.create_bot()\n\n        msg = Message("/\u5929\u6c14 \u5357\u4eac")\n        # \u5c06\u6b64\u5904\u7684 make_fake_event() \u66ff\u6362\u4e3a\u4f60\u8981\u53d1\u9001\u7684\u5e73\u53f0\u4e8b\u4ef6 Event \u7c7b\u578b\n        event = make_fake_event(_message=msg, _to_me=True)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(\n            event,\n            Message.template("\u4f60\u60f3\u67e5\u8be2\u7684\u57ce\u5e02 {} \u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01").format("\u5357\u4eac"),\n            True,\n        )\n        ctx.should_rejected()\n\n        msg = Message("\u5317\u4eac")\n        event = make_fake_event(_message=msg)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(event, "\u5317\u4eac\u7684\u5929\u6c14\u662f...", True)\n        ctx.should_finished()\n\n    async with app.test_matcher(weather) as ctx:\n        bot = ctx.create_bot()\n\n        msg = Message("/\u5929\u6c14")\n        # \u5c06\u6b64\u5904\u7684 make_fake_event() \u66ff\u6362\u4e3a\u4f60\u8981\u53d1\u9001\u7684\u5e73\u53f0\u4e8b\u4ef6 Event \u7c7b\u578b\n        event = make_fake_event(_message=msg, _to_me=True)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(event, "\u4f60\u60f3\u67e5\u8be2\u54ea\u4e2a\u57ce\u5e02\u7684\u5929\u6c14\u5462\uff1f", True)\n\n        msg = Message("\u676d\u5dde")\n        event = make_fake_event(_message=msg)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(\n            event,\n            Message.template("\u4f60\u60f3\u67e5\u8be2\u7684\u57ce\u5e02 {} \u6682\u4e0d\u652f\u6301\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165\uff01").format("\u676d\u5dde"),\n            True,\n        )\n        ctx.should_rejected()\n\n        msg = Message("\u5317\u4eac")\n        event = make_fake_event(_message=msg)()\n\n        ctx.receive_event(bot, event)\n        ctx.should_call_send(event, "\u5317\u4eac\u7684\u5929\u6c14\u662f...", True)\n        ctx.should_finished()\n'}}]);