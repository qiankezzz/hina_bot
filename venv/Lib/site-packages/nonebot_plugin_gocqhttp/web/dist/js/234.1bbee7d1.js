"use strict";(globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]=globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]||[]).push([[234],{73610:(e,l,t)=>{t.d(l,{Z:()=>U});var o=t(59835),a=t(86970),s=t(60499),n=t(66663),i=t(96489),c=t.n(i),r=t(22003),d=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(o.next(e))}catch(l){s(l)}}function i(e){try{c(o["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):a(e.value).then(n,i)}c((o=o.apply(e,l||[])).next())}))};const u=(0,o._)("div",{class:"text-h5 self-start"},"进程日志",-1),v={key:0},m=["innerHTML"],p={key:0,class:"timestamp"},_={key:1,class:"level"},f=["innerHTML"],g=(0,o.aZ)({__name:"LogsConsole",props:{logs:null,connected:{type:Boolean},height:null},emits:["reconnect"],setup(e,{emit:l}){const t=e,i="当前版本:",g={[r.dJ.Debug]:"level-debug",[r.dJ.Info]:"level-info",[r.dJ.Warning]:"level-warn",[r.dJ.Error]:"level-error",[r.dJ.Fatal]:"level-fatal",[r.dJ.Stdout]:"stdout"},w=new(c());w.use_classes=!0;const y=(0,s.iH)(),h=(0,s.iH)();return(0,o.YP)((()=>t.logs.length),(()=>d(this,void 0,void 0,(function*(){if(!h.value)return;const e=h.value.getScrollTarget(),{scrollTop:l,clientHeight:t,scrollHeight:a}=e;Math.abs(l+t-a)<=1&&(yield(0,o.Y3)(),e.scrollTop=a)})))),(t,c)=>{const d=(0,o.up)("q-space"),k=(0,o.up)("q-chip"),W=(0,o.up)("q-btn"),b=(0,o.up)("q-card-section"),q=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(q,null,{default:(0,o.w5)((()=>{var q;return[(0,o.Wm)(b,{class:"row q-gutter-x-md items-center justify-start"},{default:(0,o.w5)((()=>[u,(0,o.Wm)(d),"boolean"===typeof e.connected?((0,o.wg)(),(0,o.j4)(k,{key:0,onClick:c[0]||(c[0]=e=>l("reconnect",e)),clickable:!e.connected,color:e.connected?"positive":"negative",icon:e.connected?"link":"link_off"},{default:(0,o.w5)((()=>[(0,o.Uk)(" 状态: "+(0,a.zw)(e.connected?"实时":"断开"),1)])),_:1},8,["clickable","color","icon"])):(0,o.kq)("",!0),(0,o.Wm)(W,{onClick:c[1]||(c[1]=e=>{var l;return null===(l=h.value)||void 0===l?void 0:l.setScrollPercentage("vertical",1,300)}),flat:"",rounded:"",icon:"move_down",label:"跳转底部"}),(0,o.WI)(t.$slots,"top-trailing")])),_:3}),(0,o.WI)(t.$slots,"top"),(0,o.Wm)((0,s.SU)(n.Z),{ref_key:"scroll",ref:h,class:"page-logs",style:(0,a.j5)({height:null!==(q=e.height)&&void 0!==q?q:"calc(100vh - 10rem)"})},{default:(0,o.w5)((()=>[(0,o._)("div",{ref_key:"root",ref:y,class:"logs ansi-up-theme"},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.logs,((e,l)=>{var t;return(0,o.wg)(),(0,o.iD)("div",{class:"line",key:l},["string"===typeof e?((0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e)},null,8,m)])):((0,o.wg)(),(0,o.iD)("div",{key:1,class:(0,a.C_)({start:e.message.startsWith(i)})},[e.time?((0,o.wg)(),(0,o.iD)("code",p,(0,a.zw)(new Date(e.time).toLocaleString()),1)):(0,o.kq)("",!0),e.level?((0,o.wg)(),(0,o.iD)("code",_,(0,a.zw)(e.level),1)):(0,o.kq)("",!0),(0,o._)("code",{innerHTML:(0,s.SU)(w).ansi_to_html(e.message),class:(0,a.C_)(g[null!==(t=e.level)&&void 0!==t?t:(0,s.SU)(r.dJ).Stdout])},null,10,f)],2))])})),128))],512)])),_:1},8,["style"])]})),_:3})}}});var w=t(44458),y=t(63190),h=t(90136),k=t(57691),W=t(68879),b=t(69984),q=t.n(b);const x=g,U=x;q()(g,"components",{QCard:w.Z,QCardSection:y.Z,QSpace:h.Z,QChip:k.Z,QBtn:W.Z,QScrollArea:n.Z})},34234:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ee});var o=t(59835),a=t(60499),s=t(86970),n=t(34136),i=t(19302),c=t(27092),r=t.n(c),d=t(73610),u=function(e,l,t,o){function a(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function n(e){try{c(o.next(e))}catch(l){s(l)}}function i(e){try{c(o["throw"](e))}catch(l){s(l)}}function c(e){e.done?t(e.value):a(e.value).then(n,i)}c((o=o.apply(e,l||[])).next())}))};const v=e=>((0,o.dD)("data-v-b9abaffc"),e=e(),(0,o.Cn)(),e),m={class:"q-pa-sm col-12 col-lg-4 col-md-6 q-gutter-y-sm items-baseline justify-evenly"},p=v((()=>(0,o._)("div",{class:"text-h5"},"CPU占用",-1))),_={class:"text-body1 q-py-sm"},f={class:"digit-display q-mx-sm"},g={class:"text-body1 q-py-sm"},w={class:"digit-display q-mx-sm"},y=v((()=>(0,o._)("div",{class:"text-h5"},"内存占用",-1))),h={class:"text-body1"},k={class:"digit-display q-mx-sm"},W={class:"row text-body1"},b={class:"q-mr-sm q-my-sm"},q={class:"digit-display"},x={class:"q-my-sm"},U={class:"digit-display"},S={class:"text-body1 q-py-sm"},z={class:"digit-display q-mx-sm"},Z=v((()=>(0,o._)("div",{class:"text-h5"},"系统信息",-1))),C={class:"col-12"},P=v((()=>(0,o._)("div",{class:"text-body1"},"硬盘占用",-1))),Q={class:"absolute-full flex flex-center"},B={class:"text-body2 text-grey q-pt-sm"},H=v((()=>(0,o._)("div",{class:"text-body1 q-pb-sm"},"开机时间",-1))),D={class:"text-body2"},L=v((()=>(0,o._)("div",{class:"text-body1 q-pb-sm"},"主进程启动时间",-1))),T={class:"text-body2"},j=v((()=>(0,o._)("div",{class:"text-h5"},"资源统计",-1))),M=(0,o.aZ)({__name:"IndexView",setup(e){const l=(0,i.Z)(),t=(0,a.iH)(),c=(0,a.iH)(2e3),v=(0,a.iH)([]),M=(0,a.iH)(),A={cpuUsed:"总计CPU占用",cpuProcess:"主进程CPU占用",memoryUsed:"总计内存占用",memoryProcess:"主进程内存占用"},J={dataLabels:{enabled:!1},xaxis:{type:"datetime",range:9e4},yaxis:{max:100,min:0,decimalsInFloat:1},stroke:{curve:"smooth"}},I=Object.values(A).map((e=>({name:e,data:[]}))),Y=(0,a.iH)();function V(e,l=2){if(0===e)return"0 Bytes";const t=1024,o=l<0?0:l,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(e)/Math.log(t));return(e/Math.pow(t,s)).toFixed(o)+a[s]}let F;function G(){var e;return u(this,void 0,void 0,(function*(){try{l.loadingBar.start();const{data:o}=yield n.api.systemStatusApiStatusGet();t.value=o;const a=Date.now();null===(e=Y.value)||void 0===e||e.appendData(Object.entries({[A.cpuUsed]:o.cpu_percent,[A.cpuProcess]:o.process.cpu_percent,[A.memoryUsed]:o.memory.percent,[A.memoryProcess]:o.process.memory_used/o.memory.total*100}).map((([e,l])=>({name:e,data:[{x:a,y:l}]}))))}finally{l.loadingBar.stop(),F=window.setTimeout((()=>{G()}),c.value)}}))}function O(){var e;return u(this,void 0,void 0,(function*(){const{data:l}=yield n.api.systemLogsHistoryApiLogsGet();v.value=l,null===(e=M.value)||void 0===e||e.close();const t=new URL("api/logs",location.href);t.protocol="https:"===t.protocol?"wss:":"ws:",M.value=new WebSocket(t.href),M.value.onmessage=({data:e})=>v.value.push(e),M.value.onclose=()=>M.value=void 0}))}return(0,o.bv)((()=>{G(),O()})),(0,o.Jd)((()=>{var e;window.clearTimeout(F),null===(e=M.value)||void 0===e||e.close()})),(0,o.YP)((()=>l.dark.isActive),(()=>{var e;null===(e=Y.value)||void 0===e||e.updateOptions({theme:{mode:l.dark.isActive?"dark":"light"}})}),{immediate:!0}),(e,n)=>{const i=(0,o.up)("q-card-section"),u=(0,o.up)("q-icon"),A=(0,o.up)("q-circular-progress"),F=(0,o.up)("q-separator"),G=(0,o.up)("q-card"),E=(0,o.up)("q-badge"),K=(0,o.up)("q-linear-progress"),R=(0,o.up)("q-chip"),$=(0,o.up)("q-slider"),N=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(N,{class:"row items-stretch justify-start q-ma-md"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(G,{class:"col-12 col-lg-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[p])),_:1}),(0,o.Wm)(i,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.cpu_percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"green",class:"q-ma-sm"},{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.process.cpu_percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"developer_board",size:"md",color:"teal"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color","thickness"])]})),_:1}),(0,o.Wm)(F,{vertical:""}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e,l;return[(0,o._)("div",_,[(0,o.Uk)(" 总计 "),(0,o._)("span",f,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.cpu_percent.toPrecision(3))+"% ",1)]),(0,o.Wm)(F,{spaced:""}),(0,o._)("div",g,[(0,o.Uk)(" 主进程 "),(0,o._)("span",w,(0,s.zw)(null===(l=t.value)||void 0===l?void 0:l.process.cpu_percent.toPrecision(3))+"% ",1)])]})),_:1})])),_:1})])),_:1}),(0,o.Wm)(G,{class:"col-12 col-lg-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[y])),_:1}),(0,o.Wm)(i,{horizontal:""},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Wm)(A,{value:null===(e=t.value)||void 0===e?void 0:e.memory.percent,"track-color":(0,a.SU)(l).dark.isActive?"grey-8":"grey-3",thickness:.2,size:"16vh","show-value":"",color:"blue",class:"q-ma-sm"},{default:(0,o.w5)((()=>{var e,s,n,i;return[(0,o.Wm)(A,{value:(null!==(s=null===(e=t.value)||void 0===e?void 0:e.process.memory_used)&&void 0!==s?s:0)/(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)*100,"track-color":(0,a.SU)(l).dark.isActive?"grey-9":"grey-4","show-value":"",size:"15vh",color:"purple"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{name:"memory",size:"md",color:"light-green"})])),_:1},8,["value","track-color"])]})),_:1},8,["value","track-color","thickness"])]})),_:1}),(0,o.Wm)(F,{vertical:""}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>{var e,l,a,n,i,c,r;return[(0,o._)("div",h,[(0,o.Uk)(" 内存 "),(0,o._)("span",k,(0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.memory.percent)+"%",1)]),(0,o.Wm)(F,{spaced:""}),(0,o._)("div",W,[(0,o._)("div",b,[(0,o.Uk)(" 剩余 "),(0,o._)("span",q,(0,s.zw)(V(null!==(a=null===(l=t.value)||void 0===l?void 0:l.memory.available)&&void 0!==a?a:0)),1)]),(0,o._)("div",x,[(0,o.Uk)(" 总计 "),(0,o._)("span",U,(0,s.zw)(V(null!==(i=null===(n=t.value)||void 0===n?void 0:n.memory.total)&&void 0!==i?i:0)),1)])]),(0,o.Wm)(F,{spaced:""}),(0,o._)("div",S,[(0,o.Uk)(" 主进程 "),(0,o._)("span",z,(0,s.zw)(V(null!==(r=null===(c=t.value)||void 0===c?void 0:c.process.memory_used)&&void 0!==r?r:0)),1)])]})),_:1})])),_:1})])),_:1}),(0,o.Wm)(G,{class:"col-12 col-md-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[Z])),_:1}),(0,o.Wm)(i,{class:"row justify-evenly"},{default:(0,o.w5)((()=>{var e,l,a,n,i,c,r,d,u,v;return[(0,o._)("div",C,[P,(0,o.Wm)(K,{value:(null!==(l=null===(e=t.value)||void 0===e?void 0:e.disk.percent)&&void 0!==l?l:0)/100,stripe:"",rounded:"",size:"20px",color:"orange",class:"q-mt-sm"},{default:(0,o.w5)((()=>[(0,o._)("div",Q,[(0,o.Wm)(E,null,{default:(0,o.w5)((()=>{var e;return[(0,o.Uk)((0,s.zw)(null===(e=t.value)||void 0===e?void 0:e.disk.percent)+"%",1)]})),_:1})])])),_:1},8,["value"]),(0,o._)("div",B,(0,s.zw)(V(null!==(n=null===(a=t.value)||void 0===a?void 0:a.disk.free)&&void 0!==n?n:0))+"/ "+(0,s.zw)(V(null!==(c=null===(i=t.value)||void 0===i?void 0:i.disk.total)&&void 0!==c?c:0)),1),(0,o.Wm)(F,{spaced:""}),H,(0,o._)("div",D,(0,s.zw)(new Date(1e3*(null!==(d=null===(r=t.value)||void 0===r?void 0:r.boot_time)&&void 0!==d?d:0)).toLocaleString()),1),(0,o.Wm)(F,{spaced:""}),L,(0,o._)("div",T,(0,s.zw)(new Date(1e3*(null!==(v=null===(u=t.value)||void 0===u?void 0:u.process.start_time)&&void 0!==v?v:0)).toLocaleString()),1)])]})),_:1})])),_:1}),(0,o.Wm)(G,{class:"col-12 col-md-6"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{class:"card-title"},{default:(0,o.w5)((()=>[j])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Wm)((0,a.SU)(r()),{type:"area",ref_key:"chart",ref:Y,height:"250",options:J,series:(0,a.SU)(I)},null,8,["series"])])),_:1}),(0,o.Wm)(i,{class:"row justify-end items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{icon:"refresh"},{default:(0,o.w5)((()=>[(0,o.Uk)("数据更新间隔")])),_:1}),(0,o.Wm)($,{class:"col-8 col-sm-4",modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),snap:"",min:500,max:1e4,step:100},null,8,["modelValue"]),(0,o.Wm)(E,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(c.value)+"ms",1)])),_:1})])),_:1})])),_:1})]),(0,o.Wm)(d.Z,{class:"col-12 col-lg-8 col-md-6",onReconnect:O,logs:v.value,connected:!!M.value,height:"100%"},null,8,["logs","connected"])])),_:1})}}});var A=t(11639),J=t(69885),I=t(44458),Y=t(63190),V=t(83302),F=t(22857),G=t(50926),O=t(8289),E=t(20990),K=t(57691),R=t(28423),$=t(69984),N=t.n($);const X=(0,A.Z)(M,[["__scopeId","data-v-b9abaffc"]]),ee=X;N()(M,"components",{QPage:J.Z,QCard:I.Z,QCardSection:Y.Z,QCircularProgress:V.Z,QIcon:F.Z,QSeparator:G.Z,QLinearProgress:O.Z,QBadge:E.Z,QChip:K.Z,QSlider:R.Z})}}]);