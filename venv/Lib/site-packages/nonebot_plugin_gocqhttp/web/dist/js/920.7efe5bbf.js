"use strict";(globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]=globalThis["webpackChunknonebot_plugin_gocqhttp_frontend"]||[]).push([[920],{73632:(e,t,i)=>{i.r(t);var n=i(48077),o=i(97791),s=i(2548),r=i(21921),a=i(85398),l=i(55191),d=i(98642),c=i(70959),u=i(71400),h=i(55455),g=i(95896),p=i(81086),m=i(95402),f=i(93215),v=i(90970),C=i(33162),b=i(67026),_=i(79857),S=i(16375),w=i(54732),x=i(16458),L=i(15498),y=i(28130),I=i(89999),N=i(50200),M=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class T{constructor(e,t){this.range=e,this.direction=t}}class D{constructor(e,t,i){this.hint=e,this.anchor=t,this.provider=i,this._isResolved=!1}with(e){const t=new D(this.hint,e.anchor,this.provider);return t._isResolved=this._isResolved,t._currentResolve=this._currentResolve,t}resolve(e){return M(this,void 0,void 0,(function*(){if("function"===typeof this.provider.resolveInlayHint){if(this._currentResolve){if(yield this._currentResolve,e.isCancellationRequested)return;return this.resolve(e)}this._isResolved||(this._currentResolve=this._doResolve(e).finally((()=>this._currentResolve=void 0))),yield this._currentResolve}}))}_doResolve(e){var t,i;return M(this,void 0,void 0,(function*(){try{const n=yield Promise.resolve(this.provider.resolveInlayHint(this.hint,e));this.hint.tooltip=null!==(t=null===n||void 0===n?void 0:n.tooltip)&&void 0!==t?t:this.hint.tooltip,this.hint.label=null!==(i=null===n||void 0===n?void 0:n.label)&&void 0!==i?i:this.hint.label,this._isResolved=!0}catch(n){(0,d.Cp)(n),this._isResolved=!1}}))}}class R{static create(e,t,i,n){return M(this,void 0,void 0,(function*(){const o=[],s=e.ordered(t).reverse().map((e=>i.map((i=>M(this,void 0,void 0,(function*(){try{const s=yield e.provideInlayHints(t,i,n);(null===s||void 0===s?void 0:s.hints.length)&&o.push([s,e])}catch(s){(0,d.Cp)(s)}}))))));if(yield Promise.all(s.flat()),n.isCancellationRequested||t.isDisposed())throw new d.FU;return new R(i,o,t)}))}constructor(e,t,i){this._disposables=new c.SL,this.ranges=e,this.provider=new Set;const n=[];for(const[o,s]of t){this._disposables.add(o),this.provider.add(s);for(const e of o.hints){const t=i.validatePosition(e.position);let o="before";const r=R._getRangeAtPosition(i,t);let a;r.getStartPosition().isBefore(t)?(a=C.e.fromPositions(r.getStartPosition(),t),o="after"):(a=C.e.fromPositions(t,r.getEndPosition()),o="before"),n.push(new D(e,new T(a,o),s))}}this.items=n.sort(((e,t)=>I.L.compare(e.hint.position,t.hint.position)))}dispose(){this._disposables.dispose()}static _getRangeAtPosition(e,t){const i=t.lineNumber,n=e.getWordAtPosition(t);if(n)return new C.e(i,n.startColumn,i,n.endColumn);e.tokenization.tokenizeIfCheap(i);const o=e.tokenization.getLineTokens(i),s=t.column-1,r=o.findTokenIndexAtOffset(s);let a=o.getStartOffset(r),l=o.getEndOffset(r);return l-a===1&&(a===s&&r>1?(a=o.getStartOffset(r-1),l=o.getEndOffset(r-1)):l===s&&r<o.getCount()-1&&(a=o.getStartOffset(r+1),l=o.getEndOffset(r+1))),new C.e(i,a+1,i,l+1)}}function A(e){return g.o.from({scheme:N.lg.command,path:e.id,query:e.arguments&&encodeURIComponent(JSON.stringify(e.arguments))}).toString()}var E=i(23507),O=i(46871),P=i(39326),k=i(21881),F=i(18736),H=i(47277),U=i(32656),W=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},V=function(e,t){return function(i,n){t(i,n,e)}},K=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class B{constructor(){this._entries=new u.z6(50)}get(e){const t=B._key(e);return this._entries.get(t)}set(e,t){const i=B._key(e);this._entries.set(i,t)}static _key(e){return`${e.uri.toString()}/${e.getVersionId()}`}}const j=(0,k.yh)("IInlayHintsCache");(0,P.z)(j,B,1);class z{constructor(e,t){this.item=e,this.index=t}get part(){const e=this.item.hint.label;return"string"===typeof e?{label:e}:e[this.index]}}class Q{constructor(e,t){this.part=e,this.hasTriggerModifier=t}}let Y=class e{static get(t){var i;return null!==(i=t.getContribution(e.ID))&&void 0!==i?i:void 0}constructor(e,t,i,n,o,s,r){this._editor=e,this._languageFeaturesService=t,this._inlayHintsCache=n,this._commandService=o,this._notificationService=s,this._instaService=r,this._disposables=new c.SL,this._sessionDisposables=new c.SL,this._decorationsMetadata=new Map,this._ruleFactory=new p.t7(this._editor),this._activeRenderMode=0,this._debounceInfo=i.for(t.inlayHintsProvider,"InlayHint",{min:25}),this._disposables.add(t.inlayHintsProvider.onDidChange((()=>this._update()))),this._disposables.add(e.onDidChangeModel((()=>this._update()))),this._disposables.add(e.onDidChangeModelLanguage((()=>this._update()))),this._disposables.add(e.onDidChangeConfiguration((e=>{e.hasChanged(134)&&this._update()}))),this._update()}dispose(){this._sessionDisposables.dispose(),this._removeAllDecorations(),this._disposables.dispose()}_update(){this._sessionDisposables.clear(),this._removeAllDecorations();const e=this._editor.getOption(134);if("off"===e.enabled)return;const t=this._editor.getModel();if(!t||!this._languageFeaturesService.inlayHintsProvider.has(t))return;const i=this._inlayHintsCache.get(t);let n;i&&this._updateHintsDecorators([t.getFullModelRange()],i),this._sessionDisposables.add((0,c.OF)((()=>{t.isDisposed()||this._cacheHintsForFastRestore(t)})));const o=new Set,r=new a.pY((()=>K(this,void 0,void 0,(function*(){const e=Date.now();null===n||void 0===n||n.dispose(!0),n=new l.A;const i=t.onWillDispose((()=>null===n||void 0===n?void 0:n.cancel()));try{const s=n.token,a=yield R.create(this._languageFeaturesService.inlayHintsProvider,t,this._getHintsRanges(),s);if(r.delay=this._debounceInfo.update(t,Date.now()-e),s.isCancellationRequested)return void a.dispose();for(const e of a.provider)"function"!==typeof e.onDidChangeInlayHints||o.has(e)||(o.add(e),this._sessionDisposables.add(e.onDidChangeInlayHints((()=>{r.isScheduled()||r.schedule()}))));this._sessionDisposables.add(a),this._updateHintsDecorators(a.ranges,a.items),this._cacheHintsForFastRestore(t)}catch(s){(0,d.dL)(s)}finally{n.dispose(),i.dispose()}}))),this._debounceInfo.get(t));if(this._sessionDisposables.add(r),this._sessionDisposables.add((0,c.OF)((()=>null===n||void 0===n?void 0:n.dispose(!0)))),r.schedule(0),this._sessionDisposables.add(this._editor.onDidScrollChange((e=>{!e.scrollTopChanged&&r.isScheduled()||r.schedule()}))),this._sessionDisposables.add(this._editor.onDidChangeModelContent((e=>{const t=Math.max(r.delay,1250);r.schedule(t)}))),"on"===e.enabled)this._activeRenderMode=0;else{let t,i;"onUnlessPressed"===e.enabled?(t=0,i=1):(t=1,i=0),this._activeRenderMode=t,this._sessionDisposables.add(s._q.getInstance().event((e=>{if(!this._editor.hasModel())return;const n=e.altKey&&e.ctrlKey&&!e.shiftKey&&!e.metaKey?i:t;if(n!==this._activeRenderMode){this._activeRenderMode=n;const e=this._editor.getModel(),t=this._copyInlayHintsWithCurrentAnchor(e);this._updateHintsDecorators([e.getFullModelRange()],t),r.schedule(0)}})))}this._sessionDisposables.add(this._installDblClickGesture((()=>r.schedule(0)))),this._sessionDisposables.add(this._installLinkGesture()),this._sessionDisposables.add(this._installContextMenu())}_installLinkGesture(){const e=new c.SL,t=e.add(new y.yN(this._editor)),i=new c.SL;return e.add(i),e.add(t.onMouseMoveOrRelevantKeyDown((e=>{const[t]=e,n=this._getInlayHintLabelPart(t),o=this._editor.getModel();if(!n||!o)return void i.clear();const s=new l.A;i.add((0,c.OF)((()=>s.dispose(!0)))),n.item.resolve(s.token),this._activeInlayHintPart=n.part.command||n.part.location?new Q(n,t.hasTriggerModifier):void 0;const r=o.validatePosition(n.item.hint.position).lineNumber,a=new C.e(r,1,r,o.getLineMaxColumn(r)),d=this._getInlineHintsForRange(a);this._updateHintsDecorators([a],d),i.add((0,c.OF)((()=>{this._activeInlayHintPart=void 0,this._updateHintsDecorators([a],d)})))}))),e.add(t.onCancel((()=>i.clear()))),e.add(t.onExecute((e=>K(this,void 0,void 0,(function*(){const t=this._getInlayHintLabelPart(e);if(t){const i=t.part;i.location?this._instaService.invokeFunction(E.K,e,this._editor,i.location):b.mY.is(i.command)&&(yield this._invokeCommand(i.command,t.item))}}))))),e}_getInlineHintsForRange(e){const t=new Set;for(const i of this._decorationsMetadata.values())e.containsRange(i.item.anchor.range)&&t.add(i.item);return Array.from(t)}_installDblClickGesture(e){return this._editor.onMouseUp((t=>K(this,void 0,void 0,(function*(){if(2!==t.event.detail)return;const i=this._getInlayHintLabelPart(t);if(i&&(t.event.preventDefault(),yield i.item.resolve(l.T.None),(0,r.Of)(i.item.hint.textEdits))){const t=i.item.hint.textEdits.map((e=>v.h.replace(C.e.lift(e.range),e.text)));this._editor.executeEdits("inlayHint.default",t),e()}}))))}_installContextMenu(){return this._editor.onContextMenu((e=>K(this,void 0,void 0,(function*(){if(!(e.event.target instanceof HTMLElement))return;const t=this._getInlayHintLabelPart(e);t&&(yield this._instaService.invokeFunction(E.u,this._editor,e.event.target,t))}))))}_getInlayHintLabelPart(e){var t;if(6!==e.target.type)return;const i=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return i instanceof S.HS&&(null===i||void 0===i?void 0:i.attachedData)instanceof z?i.attachedData:void 0}_invokeCommand(e,t){var i;return K(this,void 0,void 0,(function*(){try{yield this._commandService.executeCommand(e.id,...null!==(i=e.arguments)&&void 0!==i?i:[])}catch(n){this._notificationService.notify({severity:F.zb.Error,source:t.provider.displayName,message:n})}}))}_cacheHintsForFastRestore(e){const t=this._copyInlayHintsWithCurrentAnchor(e);this._inlayHintsCache.set(e,t)}_copyInlayHintsWithCurrentAnchor(e){const t=new Map;for(const[i,n]of this._decorationsMetadata){if(t.has(n.item))continue;const o=e.getDecorationRange(i);if(o){const e=new T(o,n.item.anchor.direction),i=n.item.with({anchor:e});t.set(n.item,i)}}return Array.from(t.values())}_getHintsRanges(){const e=30,t=this._editor.getModel(),i=this._editor.getVisibleRangesPlusViewportAboveBelow(),n=[];for(const o of i.sort(C.e.compareRangesUsingStarts)){const i=t.validateRange(new C.e(o.startLineNumber-e,o.startColumn,o.endLineNumber+e,o.endColumn));0!==n.length&&C.e.areIntersectingOrTouching(n[n.length-1],i)?n[n.length-1]=C.e.plusRange(n[n.length-1],i):n.push(i)}return n}_updateHintsDecorators(t,i){var n,o;const s=[],a=(e,t,i,n,o)=>{const r={content:i,inlineClassNameAffectsLetterSpacing:!0,inlineClassName:t.className,cursorStops:n,attachedData:o};s.push({item:e,classNameRef:t,decoration:{range:e.anchor.range,options:{description:"InlayHint",showIfCollapsed:e.anchor.range.isEmpty(),collapseOnReplaceEdit:!e.anchor.range.isEmpty(),stickiness:0,[e.anchor.direction]:0===this._activeRenderMode?r:void 0}}})},l=(e,t)=>{const i=this._ruleFactory.createClassNameRef({width:(d/3|0)+"px",display:"inline-block"});a(e,i," ",t?_.RM.Right:_.RM.None)},{fontSize:d,fontFamily:c,padding:u,isUniform:h}=this._getLayoutInfo(),g="--code-editorInlayHintsFontFamily";this._editor.getContainerDomNode().style.setProperty(g,c);for(const m of i){m.hint.paddingLeft&&l(m,!1);const t="string"===typeof m.hint.label?[{label:m.hint.label}]:m.hint.label;for(let e=0;e<t.length;e++){const i=t[e],o=0===e,s=e===t.length-1,l={fontSize:`${d}px`,fontFamily:`var(${g}), ${f.hL.fontFamily}`,verticalAlign:h?"baseline":"middle"};(0,r.Of)(m.hint.textEdits)&&(l.cursor="default"),this._fillInColors(l,m.hint),(i.command||i.location)&&(null===(n=this._activeInlayHintPart)||void 0===n?void 0:n.part.item)===m&&this._activeInlayHintPart.part.index===e&&(l.textDecoration="underline",this._activeInlayHintPart.hasTriggerModifier&&(l.color=(0,U.EN)(H._Yy),l.cursor="pointer")),u&&(o&&s?(l.padding=`1px ${0|Math.max(1,d/4)}px`,l.borderRadius=(d/4|0)+"px"):o?(l.padding=`1px 0 1px ${0|Math.max(1,d/4)}px`,l.borderRadius=`${d/4|0}px 0 0 ${d/4|0}px`):s?(l.padding=`1px ${0|Math.max(1,d/4)}px 1px 0`,l.borderRadius=`0 ${d/4|0}px ${d/4|0}px 0`):l.padding="1px 0 1px 0"),a(m,this._ruleFactory.createClassNameRef(l),q(i.label),s&&!m.hint.paddingRight?_.RM.Right:_.RM.None,new z(m,e))}if(m.hint.paddingRight&&l(m,!0),s.length>e._MAX_DECORATORS)break}const p=[];for(const e of t)for(const{id:t}of null!==(o=this._editor.getDecorationsInRange(e))&&void 0!==o?o:[]){const e=this._decorationsMetadata.get(t);e&&(p.push(t),e.classNameRef.dispose(),this._decorationsMetadata.delete(t))}const v=m.Z.capture(this._editor);this._editor.changeDecorations((e=>{const t=e.deltaDecorations(p,s.map((e=>e.decoration)));for(let i=0;i<t.length;i++){const e=s[i];this._decorationsMetadata.set(t[i],e)}})),v.restore(this._editor)}_fillInColors(e,t){t.kind===b.gl.Parameter?(e.backgroundColor=(0,U.EN)(H.phM),e.color=(0,U.EN)(H.HCL)):t.kind===b.gl.Type?(e.backgroundColor=(0,U.EN)(H.bKB),e.color=(0,U.EN)(H.hX8)):(e.backgroundColor=(0,U.EN)(H.PpC),e.color=(0,U.EN)(H.VVv))}_getLayoutInfo(){const e=this._editor.getOption(134),t=e.padding,i=this._editor.getOption(49),n=this._editor.getOption(46);let o=e.fontSize;(!o||o<5||o>i)&&(o=i);const s=e.fontFamily||n,r=!t&&s===n&&o===i;return{fontSize:o,fontFamily:s,padding:t,isUniform:r}}_removeAllDecorations(){this._editor.removeDecorations(Array.from(this._decorationsMetadata.keys()));for(const e of this._decorationsMetadata.values())e.classNameRef.dispose();this._decorationsMetadata.clear()}};function q(e){const t=" ";return e.replace(/[ \t]/g,t)}Y.ID="editor.contrib.InlayHints",Y._MAX_DECORATORS=1500,Y=W([V(1,x.p),V(2,w.A),V(3,j),V(4,O.H),V(5,F.lT),V(6,k.TG)],Y),O.P.registerCommand("_executeInlayHintProvider",((e,...t)=>K(void 0,void 0,void 0,(function*(){const[i,n]=t;(0,h.p_)(g.o.isUri(i)),(0,h.p_)(C.e.isIRange(n));const{inlayHintsProvider:o}=e.get(x.p),s=yield e.get(L.S).createModelReference(i);try{const e=yield R.create(o,s.object.textEditorModel,[C.e.lift(n)],l.T.None),t=e.items.map((e=>e.hint));return setTimeout((()=>e.dispose()),0),t}finally{s.dispose()}}))));var G=i(81478),$=i(61141),J=i(48864),Z=i(25903),X=i(47596),ee=i(6544),te=i(25206),ie=i(47606),ne=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},oe=function(e,t){return function(i,n){t(i,n,e)}},se=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))},re=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){t=e[i](t),o(n,s,t.done,t.value)}))}}function o(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}};class ae extends o.YM{constructor(e,t,i,n){super(10,t,e.item.anchor.range,i,n,!0),this.part=e}}let le=class extends Z.D5{constructor(e,t,i,n,o,s){super(e,t,i,n,s),this._resolverService=o,this.hoverOrdinal=6}suggestHoverAnchor(e){var t;const i=Y.get(this._editor);if(!i)return null;if(6!==e.target.type)return null;const n=null===(t=e.target.detail.injectedText)||void 0===t?void 0:t.options;return n instanceof S.HS&&n.attachedData instanceof z?new ae(n.attachedData,this,e.event.posx,e.event.posy):null}computeSync(){return[]}computeAsync(e,t,i){return e instanceof ae?new a.Aq((t=>se(this,void 0,void 0,(function*(){var n,o,s,a;const{part:l}=e;if(yield l.item.resolve(i),i.isCancellationRequested)return;let d,c;if("string"===typeof l.item.hint.tooltip?d=(new G.W5).appendText(l.item.hint.tooltip):l.item.hint.tooltip&&(d=l.item.hint.tooltip),d&&t.emitOne(new Z.hU(this,e.range,[d],!1,0)),(0,r.Of)(l.item.hint.textEdits)&&t.emitOne(new Z.hU(this,e.range,[(new G.W5).appendText((0,te.NC)("hint.dbl","Double-click to insert"))],!1,10001)),"string"===typeof l.part.tooltip?c=(new G.W5).appendText(l.part.tooltip):l.part.tooltip&&(c=l.part.tooltip),c&&t.emitOne(new Z.hU(this,e.range,[c],!1,1)),l.part.location||l.part.command){let i;const n="altKey"===this._editor.getOption(74),o=n?ie.dz?(0,te.NC)("links.navigate.kb.meta.mac","cmd + click"):(0,te.NC)("links.navigate.kb.meta","ctrl + click"):ie.dz?(0,te.NC)("links.navigate.kb.alt.mac","option + click"):(0,te.NC)("links.navigate.kb.alt","alt + click");l.part.location&&l.part.command?i=(new G.W5).appendText((0,te.NC)("hint.defAndCommand","Go to Definition ({0}), right click for more",o)):l.part.location?i=(new G.W5).appendText((0,te.NC)("hint.def","Go to Definition ({0})",o)):l.part.command&&(i=new G.W5(`[${(0,te.NC)("hint.cmd","Execute Command")}](${A(l.part.command)} "${l.part.command.title}") (${o})`,{isTrusted:!0})),i&&t.emitOne(new Z.hU(this,e.range,[i],!1,1e4))}const u=yield this._resolveInlayHintLabelPartHover(l,i);try{for(var h,g=!0,p=re(u);h=yield p.next(),n=h.done,!n;){a=h.value,g=!1;try{const e=a;t.emitOne(e)}finally{g=!0}}}catch(m){o={error:m}}finally{try{g||n||!(s=p.return)||(yield s.call(p))}finally{if(o)throw o.error}}})))):a.Aq.EMPTY}_resolveInlayHintLabelPartHover(e,t){return se(this,void 0,void 0,(function*(){if(!e.part.location)return a.Aq.EMPTY;const{uri:i,range:n}=e.part.location,o=yield this._resolverService.createModelReference(i);try{const i=o.object.textEditorModel;return this._languageFeaturesService.hoverProvider.has(i)?(0,J.R8)(this._languageFeaturesService.hoverProvider,i,new I.L(n.startLineNumber,n.startColumn),t).filter((e=>!(0,G.CP)(e.hover.contents))).map((t=>new Z.hU(this,e.item.anchor.range,t.hover.contents,!1,2+t.ordinal))):a.Aq.EMPTY}finally{o.dispose()}}))}};le=ne([oe(1,$.O),oe(2,ee.v4),oe(3,X.Ui),oe(4,L.S),oe(5,x.p)],le),(0,n._K)(Y.ID,Y,1),o.Ae.register(le)},23507:(e,t,i)=>{i.d(t,{K:()=>C,u:()=>v});var n=i(2548),o=i(10205),s=i(55191),r=i(33162),a=i(15498),l=i(68703),d=i(78097),c=i(82693),u=i(46871),h=i(66538),g=i(93753),p=i(21881),m=i(18736),f=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function v(e,t,i,d){var h;return f(this,void 0,void 0,(function*(){const v=e.get(a.S),C=e.get(g.i),b=e.get(u.H),_=e.get(p.TG),S=e.get(m.lT);if(yield d.item.resolve(s.T.None),!d.part.location)return;const w=d.part.location,x=[],L=new Set(c.BH.getMenuItems(c.eH.EditorContext).map((e=>(0,c.vr)(e)?e.command.id:"")));for(const e of l.SymbolNavigationAction.all())L.has(e.desc.id)&&x.push(new o.aU(e.desc.id,c.U8.label(e.desc,{renderShortTitle:!0}),void 0,!0,(()=>f(this,void 0,void 0,(function*(){const i=yield v.createModelReference(w.uri);try{yield _.invokeFunction(e.run.bind(e),t,new l.SymbolNavigationAnchor(i.object.textEditorModel,r.e.getStartPosition(w.range)))}finally{i.dispose()}})))));if(d.part.command){const{command:e}=d.part;x.push(new o.Z0),x.push(new o.aU(e.id,e.title,void 0,!0,(()=>f(this,void 0,void 0,(function*(){var t;try{yield b.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}catch(i){S.notify({severity:m.zb.Error,source:d.item.provider.displayName,message:i})}})))))}const y=t.getOption(121);C.showContextMenu({domForShadowRoot:y&&null!==(h=t.getDomNode())&&void 0!==h?h:void 0,getAnchor:()=>{const e=n.i(i);return{x:e.left,y:e.top+e.height+8}},getActions:()=>x,onHide:()=>{t.focus()},autoSelectFirstItem:!0})}))}function C(e,t,i,n){return f(this,void 0,void 0,(function*(){const o=e.get(a.S),s=yield o.createModelReference(n.uri);yield i.invokeWithinContext((e=>f(this,void 0,void 0,(function*(){const o=t.hasSideBySideModifier,a=e.get(h.i6),c=d.Jy.inPeekEditor.getValue(a),u=!o&&i.getOption(83)&&!c,g=new l.DefinitionAction({openToSide:o,openInPeek:u,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0});return g.run(e,new l.SymbolNavigationAnchor(s.object.textEditorModel,r.e.getStartPosition(n.range)),r.e.lift(n.range))})))),s.dispose()}))}},8373:(e,t,i)=>{i.d(t,{Np:()=>o,OW:()=>s,Ou:()=>n});const n="editor.action.inlineSuggest.commit",o="editor.action.inlineSuggest.showPrevious",s="editor.action.inlineSuggest.showNext"},20737:(e,t,i)=>{i.r(t);var n=i(48077),o=i(97791),s=i(11271),r=i(70959),a=i(61720),l=i(16779),d=i(44950),c=i(8373),u=i(89999),h=i(67026),g=i(65662),p=i(85398),m=i(55191),f=i(98642),v=i(70546),C=i(25109),b=i(90970),_=i(33162),S=i(97297),w=i(98817),x=i(54732),L=i(16458);function y(e,t){return{object:e,dispose:()=>null===t||void 0===t?void 0:t.dispose()}}function I(e,t){const i=new N(e),n=t.map((e=>{const t=_.e.lift(e.range);return{startOffset:i.getOffset(t.getStartPosition()),endOffset:i.getOffset(t.getEndPosition()),text:e.text}}));n.sort(((e,t)=>t.startOffset-e.startOffset));for(const o of n)e=e.substring(0,o.startOffset)+o.text+e.substring(o.endOffset);return e}class N{constructor(e){this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)"\n"===e.charAt(t)&&this.lineStartOffsetByLineIdx.push(t+1)}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}}const M=[];function T(){return M}class D{constructor(e,t,i=0){this.lineNumber=e,this.parts=t,this.additionalReservedLineCount=i}renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1),n=I(i,this.parts.map((e=>({range:{startLineNumber:1,endLineNumber:1,startColumn:e.column,endColumn:e.column},text:e.lines.join("\n")}))));return n.substring(this.parts[0].column-1)}isEmpty(){return this.parts.every((e=>0===e.lines.length))}}class R{constructor(e,t,i){this.column=e,this.lines=t,this.preview=i}}class A{constructor(e,t,i,n,o=0){this.lineNumber=e,this.columnStart=t,this.length=i,this.newLines=n,this.additionalReservedLineCount=o,this.parts=[new R(this.columnStart+this.length,this.newLines,!1)]}renderForScreenReader(e){return this.newLines.join("\n")}}class E extends r.JT{constructor(e){super(),this.editor=e,this._expanded=void 0,this.onDidChangeEmitter=new s.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(112)&&void 0===this._expanded&&this.onDidChangeEmitter.fire()})))}setExpanded(e){this._expanded=!0,this.onDidChangeEmitter.fire()}}var O=i(88994);function P(e,t){if(!t)return t;const i=e.getValueInRange(t.range),n=a.Mh(i,t.insertText),o=e.getOffsetAt(t.range.getStartPosition())+n,s=e.getPositionAt(o),r=i.substr(n),l=a.P1(r,t.insertText),d=e.getPositionAt(Math.max(o,e.getOffsetAt(t.range.getEndPosition())-l));return{range:_.e.fromPositions(s,d),insertText:t.insertText.substr(n,t.insertText.length-n-l),snippetInfo:t.snippetInfo,filterText:t.filterText,additionalTextEdits:t.additionalTextEdits}}function k(e,t){return e===t||!(!e||!t)&&(e.range.equalsRange(t.range)&&e.insertText===t.insertText&&e.command===t.command)}function F(e,t,i,n,o=0){if(e.range.startLineNumber!==e.range.endLineNumber)return;const s=t.getLineContent(e.range.startLineNumber),r=a.V8(s).length,l=e.range.startColumn-1<=r;if(l){const t=a.V8(e.insertText).length,i=s.substring(e.range.startColumn-1,r),n=_.e.fromPositions(e.range.getStartPosition().delta(0,i.length),e.range.getEndPosition()),o=e.insertText.startsWith(i)?e.insertText.substring(i.length):e.insertText.substring(t);e={range:n,insertText:o,command:e.command,snippetInfo:void 0,filterText:e.filterText,additionalTextEdits:e.additionalTextEdits}}const d=t.getValueInRange(e.range),c=U(d,e.insertText);if(!c)return;const u=e.range.startLineNumber,h=new Array;if("prefix"===i){const e=c.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==d.length)return}const g=e.insertText.length-o;for(const p of c){const t=e.range.startColumn+p.originalStart+p.originalLength;if("subwordSmart"===i&&n&&n.lineNumber===e.range.startLineNumber&&t<n.column)return;if(p.originalLength>0)return;if(0===p.modifiedLength)continue;const o=p.modifiedStart+p.modifiedLength,s=Math.max(p.modifiedStart,Math.min(o,g)),r=e.insertText.substring(p.modifiedStart,s),l=e.insertText.substring(s,Math.max(p.modifiedStart,o));if(r.length>0){const e=a.uq(r);h.push(new R(t,e,!1))}if(l.length>0){const e=a.uq(l);h.push(new R(t,e,!0))}}return new D(u,h,0)}let H;function U(e,t){if((null===H||void 0===H?void 0:H.originalValue)===e&&(null===H||void 0===H?void 0:H.newValue)===t)return null===H||void 0===H?void 0:H.changes;{let i=V(e,t,!0);if(i){const n=W(i);if(n>0){const o=V(e,t,!1);o&&W(o)<n&&(i=o)}}return H={originalValue:e,newValue:t,changes:i},i}}function W(e){let t=0;for(const i of e)t+=i.originalLength;return t}function V(e,t,i){if(e.length>5e3||t.length>5e3)return;function n(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const o=Math.max(n(e),n(t));function s(e){if(e<0)throw new Error("unexpected");return o+e+1}function r(e){let t=0,n=0;const o=new Int32Array(e.length);for(let r=0,a=e.length;r<a;r++)if(i&&"("===e[r]){const e=100*n+t;o[r]=s(2*e),t++}else if(i&&")"===e[r]){t=Math.max(t-1,0);const e=100*n+t;o[r]=s(2*e+1),0===t&&n++}else o[r]=e.charCodeAt(r);return o}const a=r(e),l=r(t);return new O.Hs({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var K=i(35465),B=i(58151),j=i(43124),z=i(46871),Q=i(47596),Y=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},q=function(e,t){return function(i,n){t(i,n,e)}},G=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let $=class extends r.JT{constructor(e,t,i,n,o,a,l){super(),this.editor=e,this.cache=t,this.commandService=i,this.languageConfigurationService=n,this.languageFeaturesService=o,this.debounceService=a,this.onDidChangeEmitter=new s.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.completionSession=this._register(new r.XK),this.active=!1,this.disposed=!1,this.debounceValue=this.debounceService.for(this.languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._register(i.onDidExecuteCommand((t=>{const i=new Set([C.wk.Tab.id,C.wk.DeleteLeft.id,C.wk.DeleteRight.id,c.Ou,"acceptSelectedSuggestion"]);i.has(t.commandId)&&e.hasTextFocus()&&this.handleUserInput()}))),this._register(this.editor.onDidType((e=>{this.handleUserInput()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{(3===e.reason||this.session&&!this.session.isValid)&&this.hide()}))),this._register((0,r.OF)((()=>{this.disposed=!0}))),this._register(this.editor.onDidBlurEditorWidget((()=>{l.getValue("editor.inlineSuggest.hideOnBlur")||K.Q.dropDownVisible||this.hide()})))}handleUserInput(){this.session&&!this.session.isValid&&this.hide(),setTimeout((()=>{this.disposed||this.startSessionIfTriggered()}),0)}get session(){return this.completionSession.value}get ghostText(){var e;return null===(e=this.session)||void 0===e?void 0:e.ghostText}get minReservedLineCount(){return this.session?this.session.minReservedLineCount:0}setExpanded(e){var t;null===(t=this.session)||void 0===t||t.setExpanded(e)}setActive(e){var t;this.active=e,e&&(null===(t=this.session)||void 0===t||t.scheduleAutomaticUpdate())}startSessionIfTriggered(){const e=this.editor.getOption(59);e.enabled&&(this.session&&this.session.isValid||this.trigger(h.bw.Automatic))}trigger(e){this.completionSession.value?e===h.bw.Explicit&&this.completionSession.value.ensureUpdateWithExplicitContext():(this.completionSession.value=new J(this.editor,this.editor.getPosition(),(()=>this.active),this.commandService,this.cache,e,this.languageConfigurationService,this.languageFeaturesService.inlineCompletionsProvider,this.debounceValue),this.completionSession.value.takeOwnership(this.completionSession.value.onDidChange((()=>{this.onDidChangeEmitter.fire()}))))}hide(){this.completionSession.clear(),this.onDidChangeEmitter.fire()}commitCurrentSuggestion(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletion()}commitCurrentSuggestionPartially(){var e;null===(e=this.session)||void 0===e||e.commitCurrentCompletionNextWord()}showNext(){var e;null===(e=this.session)||void 0===e||e.showNextInlineCompletion()}showPrevious(){var e;null===(e=this.session)||void 0===e||e.showPreviousInlineCompletion()}};$=Y([q(2,z.H),q(3,S.c_),q(4,L.p),q(5,x.A),q(6,Q.Ui)],$);class J extends E{constructor(e,t,i,n,o,s,a,l,d){let c;super(e),this.triggerPosition=t,this.shouldUpdate=i,this.commandService=n,this.cache=o,this.initialTriggerKind=s,this.languageConfigurationService=a,this.registry=l,this.debounce=d,this.minReservedLineCount=0,this.updateOperation=this._register(new r.XK),this.updateSoon=this._register(new p.pY((()=>{const e=this.initialTriggerKind;return this.initialTriggerKind=h.bw.Automatic,this.update(e)}),50)),this.filteredCompletions=[],this.currentlySelectedCompletionId=void 0,this._register(this.onDidChange((()=>{var e;const t=this.currentCompletion;if(t&&t.sourceInlineCompletion!==c){c=t.sourceInlineCompletion;const i=t.sourceProvider;null===(e=i.handleItemDidShow)||void 0===e||e.call(i,t.sourceInlineCompletions,c)}}))),this._register((0,r.OF)((()=>{this.cache.clear()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{var t;3!==e.reason&&(null===(t=this.cache.value)||void 0===t||t.updateRanges(),this.cache.value&&(this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire()))}))),this._register(this.editor.onDidChangeModelContent((e=>{var t;null===(t=this.cache.value)||void 0===t||t.updateRanges(),this.updateFilteredInlineCompletions(),this.scheduleAutomaticUpdate()}))),this._register(this.registry.onDidChange((()=>{this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}))),this.scheduleAutomaticUpdate()}updateFilteredInlineCompletions(){if(!this.cache.value)return void(this.filteredCompletions=[]);const e=this.editor.getModel(),t=e.validatePosition(this.editor.getPosition());this.filteredCompletions=this.cache.value.completions.filter((i=>{const n=e.getValueInRange(i.synchronizedRange).toLowerCase(),o=i.inlineCompletion.filterText.toLowerCase(),s=e.getLineIndentColumn(i.synchronizedRange.startLineNumber),r=Math.max(0,t.column-i.synchronizedRange.startColumn);let a=o.substring(0,r),l=o.substring(r),d=n.substring(0,r),c=n.substring(r);return i.synchronizedRange.startColumn<=s&&(d=d.trimStart(),0===d.length&&(c=c.trimStart()),a=a.trimStart(),0===a.length&&(l=l.trimStart())),a.startsWith(d)&&(0,v.Sy)(c,l)}))}get currentlySelectedIndex(){return this.fixAndGetIndexOfCurrentSelection()}fixAndGetIndexOfCurrentSelection(){if(!this.currentlySelectedCompletionId||!this.cache.value)return 0;if(0===this.cache.value.completions.length)return 0;const e=this.filteredCompletions.findIndex((e=>e.semanticId===this.currentlySelectedCompletionId));return-1===e?(this.currentlySelectedCompletionId=void 0,0):e}get currentCachedCompletion(){if(this.cache.value)return this.filteredCompletions[this.fixAndGetIndexOfCurrentSelection()]}showNextInlineCompletion(){return G(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}showPreviousInlineCompletion(){return G(this,void 0,void 0,(function*(){yield this.ensureUpdateWithExplicitContext();const e=this.filteredCompletions||[];if(e.length>0){const t=(this.fixAndGetIndexOfCurrentSelection()+e.length-1)%e.length;this.currentlySelectedCompletionId=e[t].semanticId}else this.currentlySelectedCompletionId=void 0;this.onDidChangeEmitter.fire()}))}get hasBeenTriggeredExplicitly(){var e;return(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)===h.bw.Explicit}ensureUpdateWithExplicitContext(){var e;return G(this,void 0,void 0,(function*(){this.updateOperation.value?this.updateOperation.value.triggerKind===h.bw.Explicit?yield this.updateOperation.value.promise:yield this.update(h.bw.Explicit):(null===(e=this.cache.value)||void 0===e?void 0:e.triggerKind)!==h.bw.Explicit&&(yield this.update(h.bw.Explicit))}))}getInlineCompletionsCountSync(){return this.filteredCompletions.length||0}get ghostText(){const e=this.currentCompletion;if(!e)return;const t=this.editor.getPosition();if(e.range.getEndPosition().isBefore(t))return;const i=this.editor.getOptions().get(59).mode,n=F(e,this.editor.getModel(),i,t);if(n){if(n.isEmpty())return;return n}return new A(e.range.startLineNumber,e.range.startColumn,e.range.endColumn-e.range.startColumn,e.insertText.split("\n"),0)}get currentCompletion(){const e=this.currentCachedCompletion;if(e)return e.toLiveInlineCompletion()}get isValid(){return this.editor.getPosition().lineNumber===this.triggerPosition.lineNumber}scheduleAutomaticUpdate(){this.updateOperation.clear(),this.updateSoon.schedule(this.debounce.get(this.editor.getModel()))}update(e){return G(this,void 0,void 0,(function*(){if(!this.shouldUpdate())return;const t=this.editor.getPosition(),i=new Date,n=(0,p.PG)((n=>G(this,void 0,void 0,(function*(){let o;try{o=yield te(this.registry,t,this.editor.getModel(),{triggerKind:e,selectedSuggestionInfo:void 0},n,this.languageConfigurationService);const s=new Date;this.debounce.update(this.editor.getModel(),s.getTime()-i.getTime())}catch(s){return void(0,f.dL)(s)}n.isCancellationRequested||(this.cache.setValue(this.editor,o,e),this.updateFilteredInlineCompletions(),this.onDidChangeEmitter.fire())})))),o=new Z(n,e);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()}))}takeOwnership(e){this._register(e)}commitCurrentCompletionNextWord(){const e=this.ghostText;if(!e)return;const t=this.currentCompletion;if(!t)return;if(t.snippetInfo||t.filterText!==t.insertText)return void this.commit(t);if(0===e.parts.length)return;const i=e.parts[0],n=new u.L(e.lineNumber,i.column),o=i.lines[0],s=this.editor.getModel().getLanguageIdAtPosition(e.lineNumber,1),r=this.languageConfigurationService.getLanguageConfiguration(s),a=new RegExp(r.wordDefinition.source,r.wordDefinition.flags.replace("g","")),l=o.match(a);let d=0;d=l&&void 0!==l.index?0===l.index?l[0].length:l.index:o.length;const c=/\s/g;let h=c.exec(o);h&&0===h.index&&(h=c.exec(o)),h&&void 0!==h.index&&h.index<d&&(d=h.index);const g=o.substring(0,d);if(this.editor.pushUndoStop(),this.editor.executeEdits("inlineSuggestion.accept",[b.h.replace(_.e.fromPositions(n),g)]),this.editor.setPosition(n.delta(0,g.length)),t.sourceProvider.handlePartialAccept){const e=_.e.fromPositions(t.range.getStartPosition(),n.delta(0,d)),i=this.editor.getModel().getValueInRange(e);t.sourceProvider.handlePartialAccept(t.sourceInlineCompletions,t.sourceInlineCompletion,i.length)}}commitCurrentCompletion(){const e=this.ghostText;if(!e)return;const t=this.currentCompletion;t&&this.commit(t)}commit(e){var t;const i=this.cache.clearAndLeak();this.editor.pushUndoStop(),e.snippetInfo?(this.editor.executeEdits("inlineSuggestion.accept",[b.h.replaceMove(e.range,""),...e.additionalTextEdits]),this.editor.setPosition(e.snippetInfo.range.getStartPosition()),null===(t=B.SnippetController2.get(this.editor))||void 0===t||t.insert(e.snippetInfo.snippet,{undoStopBefore:!1})):this.editor.executeEdits("inlineSuggestion.accept",[b.h.replaceMove(e.range,e.insertText),...e.additionalTextEdits]),e.command?this.commandService.executeCommand(e.command.id,...e.command.arguments||[]).finally((()=>{null===i||void 0===i||i.dispose()})).then(void 0,f.Cp):null===i||void 0===i||i.dispose(),this.onDidChangeEmitter.fire()}get commands(){var e;const t=new Set((null===(e=this.cache.value)||void 0===e?void 0:e.completions.map((e=>e.inlineCompletion.sourceInlineCompletions)))||[]);return[...t].flatMap((e=>e.commands||[]))}}class Z{constructor(e,t){this.promise=e,this.triggerKind=t}dispose(){this.promise.cancel()}}class X extends r.JT{constructor(e,t,i,n){super(),this.editor=t,this.onChange=i,this.triggerKind=n,this.isDisposing=!1;const o=t.changeDecorations((t=>t.deltaDecorations([],e.items.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))))));this._register((0,r.OF)((()=>{this.isDisposing=!0,t.removeDecorations(o)}))),this.completions=e.items.map(((e,t)=>new ee(e,o[t]))),this._register(t.onDidChangeModelContent((()=>{this.updateRanges()}))),this._register(e)}updateRanges(){if(this.isDisposing)return;let e=!1;const t=this.editor.getModel();for(const i of this.completions){const n=t.getDecorationRange(i.decorationId);n?i.synchronizedRange.equalsRange(n)||(e=!0,i.synchronizedRange=n):(0,f.dL)(new Error("Decoration has no range"))}e&&this.onChange()}}class ee{constructor(e,t){this.inlineCompletion=e,this.decorationId=t,this.semanticId=JSON.stringify({text:this.inlineCompletion.insertText,abbreviation:this.inlineCompletion.filterText,startLine:this.inlineCompletion.range.startLineNumber,startColumn:this.inlineCompletion.range.startColumn,command:this.inlineCompletion.command}),this.synchronizedRange=e.range}toLiveInlineCompletion(){return{insertText:this.inlineCompletion.insertText,range:this.synchronizedRange,command:this.inlineCompletion.command,sourceProvider:this.inlineCompletion.sourceProvider,sourceInlineCompletions:this.inlineCompletion.sourceInlineCompletions,sourceInlineCompletion:this.inlineCompletion.sourceInlineCompletion,snippetInfo:this.inlineCompletion.snippetInfo,filterText:this.inlineCompletion.filterText,additionalTextEdits:this.inlineCompletion.additionalTextEdits}}}function te(e,t,i,n,o=m.T.None,s){return G(this,void 0,void 0,(function*(){const r=ie(t,i),a=e.all(i),l=yield Promise.all(a.map((e=>G(this,void 0,void 0,(function*(){const s=yield Promise.resolve(e.provideInlineCompletions(i,t,n,o)).catch(f.Cp);return{completions:s,provider:e,dispose:()=>{s&&e.freeInlineCompletions(s)}}}))))),d=new Map;for(const e of l){const t=e.completions;if(t)for(const n of t.items){let o,a,l=n.range?_.e.lift(n.range):r;if(l.startLineNumber!==l.endLineNumber)continue;if("string"===typeof n.insertText){if(o=n.insertText,s&&n.completeBracketPairs){o=ne(o,l.getStartPosition(),i,s);const e=o.length-n.insertText.length;0!==e&&(l=new _.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+e))}a=void 0}else if("snippet"in n.insertText){const e=n.insertText.snippet.length;if(s&&n.completeBracketPairs){n.insertText.snippet=ne(n.insertText.snippet,l.getStartPosition(),i,s);const t=n.insertText.snippet.length-e;0!==t&&(l=new _.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+t))}const t=(new j.Yj).parse(n.insertText.snippet);1===t.children.length&&t.children[0]instanceof j.xv?(o=t.children[0].value,a=void 0):(o=t.toString(),a={snippet:n.insertText.snippet,range:l})}else(0,g.vE)(n.insertText);const c={insertText:o,snippetInfo:a,range:l,command:n.command,sourceProvider:e.provider,sourceInlineCompletions:t,sourceInlineCompletion:n,filterText:n.filterText||o,additionalTextEdits:n.additionalTextEdits||T()};d.set(JSON.stringify({insertText:o,range:n.range}),c)}}return{items:[...d.values()],dispose:()=>{for(const e of l)e.dispose()}}}))}function ie(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new _.e(e.lineNumber,i.startColumn,e.lineNumber,n):_.e.fromPositions(e,e.with(void 0,n))}function ne(e,t,i,n){const o=i.getLineContent(t.lineNumber).substring(0,t.column-1),s=o+e,r=i.tokenization.tokenizeLineWithEdit(t,s.length-(t.column-1),e),a=null===r||void 0===r?void 0:r.sliceAndInflate(t.column-1,s.length,0);if(!a)return e;const l=(0,w.r)(a,n);return l}var oe=i(21921),se=i(69377),re=i(55743);class ae extends r.JT{get state(){if(this._isActive)return{selectedItem:this._currentSuggestItemInfo}}constructor(e,t){super(),this.editor=e,this.suggestControllerPreselector=t,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this.onDidChangeEmitter=new s.Q5,this.onDidChange=this.onDidChangeEmitter.event,this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const i=re.SuggestController.get(this.editor);if(i){this._register(i.registerSelector({priority:100,select:(e,t,n)=>{const o=this.editor.getModel(),s=P(o,this.suggestControllerPreselector());if(!s)return-1;const r=u.L.lift(t),a=n.map(((e,t)=>{const n=ce(i,r,e,this.isShiftKeyPressed),a=P(o,null===n||void 0===n?void 0:n.normalizedInlineCompletion);if(!a)return;const l=le(s.range,a.range)&&s.insertText.startsWith(a.insertText);return{index:t,valid:l,prefixLength:a.insertText.length,suggestItem:e}})).filter((e=>e&&e.valid)),l=(0,oe.Dc)(a,(0,oe.tT)((e=>e.prefixLength),oe.fv));return l?l.index:-1}}));let e=!1;const t=()=>{e||(e=!0,this._register(i.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(i.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.update(!1)}))),this._register(i.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(s.ju.once(i.model.onDidTrigger)((e=>{t()})))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();let i=!1;de(this._currentSuggestItemInfo,t)||(this._currentSuggestItemInfo=t,i=!0),this._isActive!==e&&(this._isActive=e,i=!0),i&&this.onDidChangeEmitter.fire()}getSuggestItemInfo(){const e=re.SuggestController.get(this.editor);if(!e)return;if(!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem();return t?ce(e,this.editor.getPosition(),t.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=re.SuggestController.get(this.editor);null===e||void 0===e||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=re.SuggestController.get(this.editor);null===e||void 0===e||e.forceRenderingAbove()}}function le(e,t){return t.startLineNumber===e.startLineNumber&&t.startColumn===e.startColumn&&(t.endLineNumber<e.endLineNumber||t.endLineNumber===e.endLineNumber&&t.endColumn<=e.endColumn)}function de(e,t){return e===t||!(!e||!t)&&(e.completionItemKind===t.completionItemKind&&e.isSnippetText===t.isSnippetText&&k(e.normalizedInlineCompletion,t.normalizedInlineCompletion))}function ce(e,t,i,n){if(Array.isArray(i.completion.additionalTextEdits)&&i.completion.additionalTextEdits.length>0)return{completionItemKind:i.completion.kind,isSnippetText:!1,normalizedInlineCompletion:{range:_.e.fromPositions(t,t),insertText:"",filterText:"",snippetInfo:void 0,additionalTextEdits:[]}};let{insertText:o}=i.completion,s=!1;if(4&i.completion.insertTextRules){const i=(new j.Yj).parse(o),n=e.editor.getModel();if(i.children.length>100)return;se.l.adjustWhitespace(n,t,!0,i),o=i.toString(),s=!0}const r=e.getOverwriteInfo(i,n);return{isSnippetText:s,completionItemKind:i.completion.kind,normalizedInlineCompletion:{insertText:o,filterText:o,range:_.e.fromPositions(t.delta(0,-r.overwriteBefore),t.delta(0,Math.max(r.overwriteAfter,0))),snippetInfo:void 0,additionalTextEdits:[]}}}var ue=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},he=function(e,t){return function(i,n){t(i,n,e)}},ge=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let pe=class extends E{get isActive(){return void 0!==this.suggestionInlineCompletionSource.state}constructor(e,t,i){super(e),this.cache=t,this.languageFeaturesService=i,this.suggestionInlineCompletionSource=this._register(new ae(this.editor,(()=>{var e,t,i;return null===(e=this.cache.value)||void 0===e||e.updateRanges(),null===(i=null===(t=this.cache.value)||void 0===t?void 0:t.completions[0])||void 0===i?void 0:i.toLiveInlineCompletion()}))),this.updateOperation=this._register(new r.XK),this.updateCacheSoon=this._register(new p.pY((()=>this.updateCache()),50)),this.minReservedLineCount=0,this._register(this.suggestionInlineCompletionSource.onDidChange((()=>{if(!this.editor.hasModel())return;this.updateCacheSoon.schedule();const e=this.suggestionInlineCompletionSource.state;e||(this.minReservedLineCount=0);const t=this.ghostText;t&&(this.minReservedLineCount=Math.max(this.minReservedLineCount,me(t.parts.map((e=>e.lines.length-1))))),this.minReservedLineCount>=1?this.suggestionInlineCompletionSource.forceRenderingAbove():this.suggestionInlineCompletionSource.stopForceRenderingAbove(),this.onDidChangeEmitter.fire()}))),this._register(this.cache.onDidChange((()=>{this.onDidChangeEmitter.fire()}))),this._register(this.editor.onDidChangeCursorPosition((e=>{this.minReservedLineCount=0,this.updateCacheSoon.schedule(),this.onDidChangeEmitter.fire()}))),this._register((0,r.OF)((()=>this.suggestionInlineCompletionSource.stopForceRenderingAbove())))}isSuggestionPreviewEnabled(){const e=this.editor.getOption(112);return e.preview}updateCache(){return ge(this,void 0,void 0,(function*(){const e=this.suggestionInlineCompletionSource.state;if(!e||!e.selectedItem)return;const t={text:e.selectedItem.normalizedInlineCompletion.insertText,range:e.selectedItem.normalizedInlineCompletion.range,isSnippetText:e.selectedItem.isSnippetText,completionKind:e.selectedItem.completionItemKind},i=this.editor.getPosition();if(e.selectedItem.isSnippetText||27===e.selectedItem.completionItemKind||20===e.selectedItem.completionItemKind||23===e.selectedItem.completionItemKind)return void this.cache.clear();const n=(0,p.PG)((e=>ge(this,void 0,void 0,(function*(){let n;try{n=yield te(this.languageFeaturesService.inlineCompletionsProvider,i,this.editor.getModel(),{triggerKind:h.bw.Automatic,selectedSuggestionInfo:t},e)}catch(o){return void(0,f.dL)(o)}e.isCancellationRequested?n.dispose():(this.cache.setValue(this.editor,n,h.bw.Automatic),this.onDidChangeEmitter.fire())})))),o=new Z(n,h.bw.Automatic);this.updateOperation.value=o,yield n,this.updateOperation.value===o&&this.updateOperation.clear()}))}get ghostText(){var e,t,i;const n=this.isSuggestionPreviewEnabled(),o=this.editor.getModel(),s=P(o,null===(t=null===(e=this.cache.value)||void 0===e?void 0:e.completions[0])||void 0===t?void 0:t.toLiveInlineCompletion()),r=this.suggestionInlineCompletionSource.state,a=P(o,null===(i=null===r||void 0===r?void 0:r.selectedItem)||void 0===i?void 0:i.normalizedInlineCompletion),l=s&&a&&s.insertText.startsWith(a.insertText)&&fe(s.range,a.range);if(!n&&!l)return;const d=l?s:a||s,c=l?d.insertText.length-a.insertText.length:0,u=this.toGhostText(d,c);return u}toGhostText(e,t){const i=this.editor.getOptions().get(112).previewMode;return e?F(e,this.editor.getModel(),i,this.editor.getPosition(),t)||new D(e.range.endLineNumber,[],this.minReservedLineCount):void 0}};function me(e){return e.reduce(((e,t)=>e+t),0)}function fe(e,t){return e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&(e.endLineNumber===t.endLineNumber&&e.endColumn>=t.endColumn||e.endLineNumber>t.endLineNumber)}pe=ue([he(2,L.p)],pe);var ve=i(21881),Ce=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},be=function(e,t){return function(i,n){t(i,n,e)}};class _e extends r.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new s.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.hasCachedGhostText=!1,this.currentModelRef=this._register(new r.XK)}get targetModel(){var e;return null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object}setTargetModel(e){var t;(null===(t=this.currentModelRef.value)||void 0===t?void 0:t.object)!==e&&(this.currentModelRef.clear(),this.currentModelRef.value=e?y(e,e.onDidChange((()=>{this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire()}))):void 0,this.hasCachedGhostText=!1,this.onDidChangeEmitter.fire())}get ghostText(){var e,t;return this.hasCachedGhostText||(this.cachedGhostText=null===(t=null===(e=this.currentModelRef.value)||void 0===e?void 0:e.object)||void 0===t?void 0:t.ghostText,this.hasCachedGhostText=!0),this.cachedGhostText}setExpanded(e){var t;null===(t=this.targetModel)||void 0===t||t.setExpanded(e)}get minReservedLineCount(){return this.targetModel?this.targetModel.minReservedLineCount:0}}let Se=class extends _e{get activeInlineCompletionsModel(){if(this.targetModel===this.inlineCompletionsModel)return this.inlineCompletionsModel}constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.sharedCache=this._register(new we),this.suggestWidgetAdapterModel=this._register(this.instantiationService.createInstance(pe,this.editor,this.sharedCache)),this.inlineCompletionsModel=this._register(this.instantiationService.createInstance($,this.editor,this.sharedCache)),this._register(this.suggestWidgetAdapterModel.onDidChange((()=>{this.updateModel()}))),this.updateModel()}updateModel(){this.setTargetModel(this.suggestWidgetAdapterModel.isActive?this.suggestWidgetAdapterModel:this.inlineCompletionsModel),this.inlineCompletionsModel.setActive(this.targetModel===this.inlineCompletionsModel)}shouldShowHoverAt(e){var t;const i=null===(t=this.activeInlineCompletionsModel)||void 0===t?void 0:t.ghostText;return!!i&&i.parts.some((t=>e.containsPosition(new u.L(i.lineNumber,t.column))))}triggerInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.trigger(h.bw.Explicit)}commitInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestion()}commitInlineCompletionPartially(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.commitCurrentSuggestionPartially()}hideInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.hide()}showNextInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showNext()}showPreviousInlineCompletion(){var e;null===(e=this.activeInlineCompletionsModel)||void 0===e||e.showPrevious()}};Se=Ce([be(1,ve.TG)],Se);class we extends r.JT{constructor(){super(...arguments),this.onDidChangeEmitter=new s.Q5,this.onDidChange=this.onDidChangeEmitter.event,this.cache=this._register(new r.XK)}get value(){return this.cache.value}setValue(e,t,i){this.cache.value=new X(t,e,(()=>this.onDidChangeEmitter.fire()),i)}clearAndLeak(){return this.cache.clearAndLeak()}clear(){this.cache.clear()}}var xe,Le=i(2548),ye=i(6155),Ie=i(93215),Ne=i(81083),Me=i(69427),Te=i(79857),De=i(61141),Re=i(56998),Ae=i(93489),Ee=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Oe=function(e,t){return function(i,n){t(i,n,e)}};const Pe=null===(xe=window.trustedTypes)||void 0===xe?void 0:xe.createPolicy("editorGhostText",{createHTML:e=>e});let ke=class extends r.JT{constructor(e,t,i,n){super(),this.editor=e,this.model=t,this.instantiationService=i,this.languageService=n,this.disposed=!1,this.partsWidget=this._register(this.instantiationService.createInstance(He,this.editor)),this.additionalLinesWidget=this._register(new Ue(this.editor,this.languageService.languageIdCodec)),this.viewMoreContentWidget=void 0,this.replacementDecoration=this._register(new Fe(this.editor)),this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(30)||e.hasChanged(111)||e.hasChanged(93)||e.hasChanged(88)||e.hasChanged(48)||e.hasChanged(47)||e.hasChanged(63))&&this.update()}))),this._register((0,r.OF)((()=>{var e;this.disposed=!0,this.update(),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}))),this._register(t.onDidChange((()=>{this.update()}))),this.update()}shouldShowHoverAtViewZone(e){return this.additionalLinesWidget.viewZoneId===e}update(){var e;const t=this.model.ghostText;if(!this.editor.hasModel()||!t||this.disposed)return this.partsWidget.clear(),this.additionalLinesWidget.clear(),void this.replacementDecoration.clear();const i=new Array,n=new Array;function o(e,t){if(n.length>0){const i=n[n.length-1];t&&i.decorations.push(new Re.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)n.push({content:i,decorations:t?[new Re.Kp(1,i.length+1,t,0)]:[]})}t instanceof A?this.replacementDecoration.setDecorations([{range:new _.e(t.lineNumber,t.columnStart,t.lineNumber,t.columnStart+t.length),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}]):this.replacementDecoration.setDecorations([]);const s=this.editor.getModel().getLineContent(t.lineNumber);let r,a=0;for(const l of t.parts){let e=l.lines;void 0===r?(i.push({column:l.column,text:e[0],preview:l.preview}),e=e.slice(1)):o([s.substring(a,l.column-1)],void 0),e.length>0&&(o(e,"ghost-text"),void 0===r&&l.column<=s.length&&(r=l.column)),a=l.column-1}void 0!==r&&o([s.substring(a)],void 0),this.partsWidget.setParts(t.lineNumber,i,void 0!==r?{column:r,length:s.length+1-r}:void 0),this.additionalLinesWidget.updateLines(t.lineNumber,n,t.additionalReservedLineCount),null===(e=this.viewMoreContentWidget)||void 0===e||e.dispose(),this.viewMoreContentWidget=void 0}renderViewMoreLines(e,t,i){const n=this.editor.getOption(47),o=document.createElement("div");o.className="suggest-preview-additional-widget",(0,ye.N)(o,n);const s=document.createElement("span");s.className="content-spacer",s.append(t),o.append(s);const a=document.createElement("span");a.className="content-newline suggest-preview-text",a.append("⏎  "),o.append(a);const l=new r.SL,d=document.createElement("div");return d.className="button suggest-preview-text",d.append(`+${i} lines…`),l.add(Le.mu(d,"mousedown",(e=>{var t;null===(t=this.model)||void 0===t||t.setExpanded(!0),e.preventDefault(),this.editor.focus()}))),o.append(d),new Ve(this.editor,e,o,l)}};ke=Ee([Oe(2,ve.TG),Oe(3,De.O)],ke);class Fe{constructor(e){this.editor=e,this.decorationIds=[]}setDecorations(e){this.editor.changeDecorations((t=>{this.decorationIds=t.deltaDecorations(this.decorationIds,e)}))}clear(){this.setDecorations([])}dispose(){this.clear()}}class He{constructor(e){this.editor=e,this.decorationIds=[]}dispose(){this.clear()}clear(){this.editor.changeDecorations((e=>{this.decorationIds=e.deltaDecorations(this.decorationIds,[])}))}setParts(e,t,i){const n=this.editor.getModel();if(!n)return;const o=new Array;i&&o.push({range:_.e.fromPositions(new u.L(e,i.column),new u.L(e,i.column+i.length)),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}}),this.editor.changeDecorations((i=>{this.decorationIds=i.deltaDecorations(this.decorationIds,t.map((t=>({range:_.e.fromPositions(new u.L(e,t.column)),options:{description:"ghost-text",after:{content:t.text,inlineClassName:t.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:Te.RM.Left},showIfCollapsed:!0}}))).concat(o))}))}}class Ue{get viewZoneId(){return this._viewZoneId}constructor(e,t){this.editor=e,this.languageIdCodec=t,this._viewZoneId=void 0}dispose(){this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:o}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const s=Math.max(t.length,i);if(s>0){const i=document.createElement("div");We(i,o,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:s,domNode:i,afterColumnAffinity:1})}}))}}function We(e,t,i,n,o){const s=n.get(30),r=n.get(111),l="none",d=n.get(88),c=n.get(48),u=n.get(47),h=n.get(63),g=new Me.HT(1e4);g.appendString('<div class="suggest-preview-text">');for(let f=0,v=i.length;f<v;f++){const e=i[f],n=e.content;g.appendString('<div class="view-line'),g.appendString('" style="top:'),g.appendString(String(f*h)),g.appendString('px;width:1000000px;">');const p=a.$i(n),m=a.Ut(n),v=Ne.A.createEmpty(n,o);(0,Ae.d1)(new Ae.IJ(u.isMonospace&&!s,u.canUseHalfwidthRightwardsArrow,n,!1,p,m,0,v,e.decorations,t,0,u.spaceWidth,u.middotWidth,u.wsmiddotWidth,r,l,d,c!==Ie.n0.OFF,null),g),g.appendString("</div>")}g.appendString("</div>"),(0,ye.N)(e,u);const p=g.build(),m=Pe?Pe.createHTML(p):p;e.innerHTML=m}class Ve extends r.JT{constructor(e,t,i,n){super(),this.editor=e,this.position=t,this.domNode=i,this.allowEditorOverflow=!1,this.suppressMouseDown=!1,this._register(n),this._register((0,r.OF)((()=>{this.editor.removeContentWidget(this)}))),this.editor.addContentWidget(this)}getId(){return"editor.widget.viewMoreLinesWidget"}getDomNode(){return this.domNode}getPosition(){return{position:this.position,preference:[0]}}}var Ke=i(25206),Be=i(82693),je=i(66538),ze=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Qe=function(e,t){return function(i,n){t(i,n,e)}},Ye=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let qe=class e extends r.JT{static get(t){return t.getContribution(e.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}constructor(t,i,n){super(),this.editor=t,this.instantiationService=i,this.contextKeyService=n,this.triggeredExplicitly=!1,this.activeController=this._register(new r.XK),this.activeModelDidChangeEmitter=this._register(new s.Q5),this.firstUndoableVersionId=void 0,this.alwaysShowInlineSuggestionToolbar=e.alwaysShowInlineSuggestionToolbar.bindTo(this.contextKeyService),this._register(this.editor.onDidChangeModelContent((e=>{var t;(!e.isUndoing||this.firstUndoableVersionId&&this.editor.getModel().getAlternativeVersionId()<this.firstUndoableVersionId)&&(null===(t=this.activeController.value)||void 0===t||t.contextKeys.canUndoInlineSuggestion.reset(),this.firstUndoableVersionId=void 0)}))),this._register(this.editor.onDidChangeCursorPosition((e=>{var t;3===e.reason&&(null===(t=this.activeController.value)||void 0===t||t.contextKeys.canUndoInlineSuggestion.reset(),this.firstUndoableVersionId=void 0)}))),this._register(this.editor.onDidChangeModel((()=>{this.update()}))),this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(112)||e.hasChanged(59))&&this.update()}))),this.update()}update(){const e=this.editor.getOption(112),t=this.editor.getOption(59);this.alwaysShowInlineSuggestionToolbar.set("always"===t.showToolbar);const i=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly);i!==!!this.activeController.value&&(this.activeController.value=void 0,this.activeController.value=i?this.instantiationService.createInstance($e,this.editor):void 0,this.activeModelDidChangeEmitter.fire())}shouldShowHoverAt(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return(null===(i=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.update(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commitPartially(){var e,t,i;const n=this.firstUndoableVersionId;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletionPartially(),null===(i=null===(t=this.activeController)||void 0===t?void 0:t.value)||void 0===i||i.contextKeys.canUndoInlineSuggestion.set(!0),this.firstUndoableVersionId=null!==n&&void 0!==n?n:this.editor.getModel().getAlternativeVersionId()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}};qe.inlineSuggestionVisible=new je.uy("inlineSuggestionVisible",!1,Ke.NC("inlineSuggestionVisible","Whether an inline suggestion is visible")),qe.inlineSuggestionHasIndentation=new je.uy("inlineSuggestionHasIndentation",!1,Ke.NC("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),qe.inlineSuggestionHasIndentationLessThanTabSize=new je.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,Ke.NC("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),qe.canUndoInlineSuggestion=new je.uy("canUndoInlineSuggestion",!1,Ke.NC("canUndoInlineSuggestion","Whether undo would undo an inline suggestion")),qe.alwaysShowInlineSuggestionToolbar=new je.uy("alwaysShowInlineSuggestionToolbar",!1,Ke.NC("alwaysShowInlineSuggestionToolbar","Whether the inline suggestion toolbar should always be visible")),qe.ID="editor.contrib.ghostTextController",qe=ze([Qe(1,ve.TG),Qe(2,je.i6)],qe);class Ge{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=qe.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=qe.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=qe.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.canUndoInlineSuggestion=qe.canUndoInlineSuggestion.bindTo(this.contextKeyService)}}let $e=class extends r.JT{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new Ge(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(Se,this.editor)),this.widget=this._register(this.instantiationService.createInstance(ke,this.editor,this.model)),this._register((0,r.OF)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));let t=!1,i=!0;const n=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){const{column:e,lines:o}=n.parts[0],s=o[0],r=this.editor.getModel().getLineIndentColumn(n.lineNumber),d=e<=r;if(d){let e=(0,a.LC)(s);-1===e&&(e=s.length-1),t=e>0;const n=this.editor.getModel().getOptions().tabSize,o=l.i.visibleColumnFromColumn(s,e+1,n);i=o<n}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};$e=ze([Qe(1,ve.TG),Qe(2,je.i6)],$e);class Je extends n.R6{constructor(){super({id:Je.ID,label:Ke.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:je.Ao.and(d.u.writable,qe.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);e&&(e.showNextInlineCompletion(),t.focus())}))}}Je.ID=c.OW;class Ze extends n.R6{constructor(){super({id:Ze.ID,label:Ke.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:je.Ao.and(d.u.writable,qe.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);e&&(e.showPreviousInlineCompletion(),t.focus())}))}}Ze.ID=c.Np;class Xe extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:Ke.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:d.u.writable})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);null===e||void 0===e||e.trigger()}))}}class et extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:Ke.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:je.Ao.and(d.u.writable,qe.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065},menuOpts:[{menuId:Be.eH.InlineSuggestionToolbar,title:Ke.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);e&&e.commitPartially()}))}}class tt extends n.R6{constructor(){super({id:c.Ou,label:Ke.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:qe.inlineSuggestionVisible,menuOpts:[{menuId:Be.eH.InlineSuggestionToolbar,title:Ke.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:je.Ao.and(qe.inlineSuggestionVisible,d.u.tabMovesFocus.toNegated(),qe.inlineSuggestionHasIndentationLessThanTabSize)}})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);e&&(e.commit(),e.editor.focus())}))}}class it extends n.R6{constructor(){super({id:it.ID,label:Ke.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:qe.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}run(e,t){return Ye(this,void 0,void 0,(function*(){const e=qe.get(t);e&&e.hide()}))}}it.ID="editor.action.inlineSuggest.hide";class nt extends Be.Ke{constructor(){super({id:nt.ID,title:Ke.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Be.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:qe.alwaysShowInlineSuggestionToolbar})}run(e,t){return Ye(this,void 0,void 0,(function*(){const t=e.get(Q.Ui),i=t.getValue("editor.inlineSuggest.showToolbar"),n="always"===i?"onHover":"always";t.updateValue("editor.inlineSuggest.showToolbar",n)}))}}nt.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";class ot extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.undo",label:Ke.NC("action.inlineSuggest.undo","Undo Accept Word"),alias:"Undo Accept Word",precondition:je.Ao.and(d.u.writable,qe.canUndoInlineSuggestion),kbOpts:{weight:101,primary:2063,kbExpr:je.Ao.and(d.u.writable,qe.canUndoInlineSuggestion)},menuOpts:[{menuId:Be.eH.InlineSuggestionToolbar,title:Ke.NC("undoAcceptWord","Undo Accept Word"),group:"secondary",order:3}]})}run(e,t){var i;return Ye(this,void 0,void 0,(function*(){null===(i=t.getModel())||void 0===i||i.undo()}))}}var st=i(81478),rt=i(92767),at=i(55907),lt=i(6544),dt=i(38857),ct=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},ut=function(e,t){return function(i,n){t(i,n,e)}};class ht{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}requestExplicitContext(){var e,t,i;null===(i=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value)||void 0===i||i.ensureUpdateWithExplicitContext()}getInlineCompletionsCount(){var e,t;const i=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value;if(null===i||void 0===i?void 0:i.hasBeenTriggeredExplicitly)return null===i||void 0===i?void 0:i.getInlineCompletionsCountSync()}getInlineCompletionIndex(){var e,t,i;return null===(i=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value)||void 0===i?void 0:i.currentlySelectedIndex}onDidChange(e){var t,i;const n=null===(i=null===(t=this.controller.activeModel)||void 0===t?void 0:t.activeInlineCompletionsModel)||void 0===i?void 0:i.onDidChange(e);return n||r.JT.None}get commands(){var e,t,i;return(null===(i=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value)||void 0===i?void 0:i.commands)||[]}}let gt=class{constructor(e,t,i,n,o,s){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=o,this._telemetryService=s,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=qe.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new o.YM(1e3,this,_.e.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}if(7===i.type&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){const n=i.detail.mightBeForeignElement;if(n&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("always"===this._editor.getOption(59).showToolbar)return[];const i=qe.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new ht(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new r.SL,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,n,i);const o=this._instantiationService.createInstance(K.Q,this._editor,!1);return e.fragment.appendChild(o.getDomNode()),o.update(null,n.getInlineCompletionIndex()||0,n.getInlineCompletionsCount(),n.commands),n.requestExplicitContext(),i.add(n.onDidChange((()=>{o.update(null,n.getInlineCompletionIndex()||0,n.getInlineCompletionsCount(),n.commands)}))),i}renderScreenReaderText(e,t,i){var n,o;const s=Le.$,r=s("div.hover-row.markdown-hover"),a=Le.R3(r,s("div.hover-contents")),l=i.add(new rt.$({editor:this._editor},this._languageService,this._openerService)),d=t=>{i.add(l.onDidRenderAsync((()=>{a.className="hover-contents code-hover-contents",e.onContentsChanged()})));const n=Ke.NC("inlineSuggestionFollows","Suggestion:"),o=i.add(l.render((new st.W5).appendText(n).appendCodeblock("text",t)));a.replaceChildren(o.element)},c=null===(o=null===(n=t.controller.activeModel)||void 0===n?void 0:n.inlineCompletionsModel)||void 0===o?void 0:o.ghostText;if(c){const e=this._editor.getModel().getLineContent(c.lineNumber);d(c.renderForScreenReader(e))}e.fragment.appendChild(r)}};gt=ct([ut(1,De.O),ut(2,lt.v4),ut(3,at.F),ut(4,ve.TG),ut(5,dt.b)],gt),(0,n._K)(qe.ID,qe,3),(0,n.Qr)(Xe),(0,n.Qr)(Je),(0,n.Qr)(Ze),(0,n.Qr)(et),(0,n.Qr)(tt),(0,n.Qr)(it),(0,n.Qr)(ot),(0,Be.r1)(nt),o.Ae.register(gt)},35465:(e,t,i)=>{i.d(t,{Q:()=>M});var n=i(2548),o=i(78089),s=i(64347),r=i(10205),a=i(85398),l=i(8419),d=i(70959),c=i(47606),u=i(99588),h=i(8373),g=i(25206),p=i(94700),m=i(40251),f=i(82693),v=i(46871),C=i(66538),b=i(93753),_=i(21881),S=i(15285),w=i(38857),x=i(98158),L=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,n){t(i,n,e)}};const I=(0,x.q5)("inline-suggestion-hints-next",l.l.chevronRight,(0,g.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),N=(0,x.q5)("inline-suggestion-hints-previous",l.l.chevronLeft,(0,g.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let M=class e extends d.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new r.aU(e,t,i,!0,(()=>this._commandService.executeCommand(e))),o=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let s=t;return o&&(s=(0,g.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,o.getLabel())),n.tooltip=s,n}constructor(t,i,s,l,d,c,p){super(),this.editor=t,this.withBorder=i,this._commandService=s,this.keybindingService=d,this._contextKeyService=c,this._menuService=p,this.id="InlineSuggestionHintsContentWidget"+e.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,n.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,n.h)("div",{style:{display:"flex"}},[(0,n.h)("div@actionBar",{className:"custom-actions"}),(0,n.h)("div@toolBar")])]),this.position=null,this.previousAction=this.createCommandAction(h.Np,(0,g.NC)("previous","Previous"),u.k.asClassName(N)),this.availableSuggestionCountAction=new r.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(h.OW,(0,g.NC)("next","Next"),u.k.asClassName(I)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(f.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new a.pY((()=>{this.availableSuggestionCountAction.label=""}),100)),this.disableButtonsDebounced=this._register(new a.pY((()=>{this.previousAction.enabled=this.nextAction.enabled=!1}),100));const m=this._register(new o.o(this.nodes.actionBar));m.push(this.previousAction,{icon:!0,label:!1}),m.push(this.availableSuggestionCountAction),m.push(this.nextAction,{icon:!0,label:!1}),this.toolBar=this._register(l.createInstance(D,this.nodes.toolBar,f.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>e instanceof f.U8?l.createInstance(T,e,void 0):void 0,telemetrySource:"InlineSuggestionToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility((t=>{e._dropDownVisible=t})))}update(e,t,i,n){this.position=e,void 0!==i&&i>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule(),void 0!==i?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${t+1}/${i}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),this.editor.layoutContentWidget(this);const o=n.map((e=>({class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:t=>this._commandService.executeCommand(e.id)})));for(const[s,r]of this.inlineCompletionsActionsMenus.getActions())for(const e of r)e instanceof f.U8&&o.push(e);o.length>0&&o.unshift(new r.Z0),this.toolBar.setAdditionalSecondaryActions(o)}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this.position,preference:[1,2],positionAffinity:3}}};M._dropDownVisible=!1,M.id=0,M=L([y(2,v.H),y(3,_.TG),y(4,S.d),y(5,C.i6),y(6,f.co)],M);class T extends p.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,n.h)("div.keybinding").root,i=new s.e(t,c.OS,Object.assign({disableTitle:!0},s.F));i.set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}}let D=class extends m.T{constructor(e,t,i,n,o,s,r,a){super(e,Object.assign({resetMenu:t},i),n,o,s,r,a),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=o,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,s,r;const a=[],l=[];(0,p.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:a,secondary:l},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(r=null===(s=this.options2)||void 0===s?void 0:s.toolbarOptions)||void 0===r?void 0:r.useSeparatorsInPrimaryActions),l.push(...this.additionalActions),this.setActions(a,l)}setAdditionalSecondaryActions(e){this.additionalActions=e,this.updateToolbar()}};D=L([y(3,f.co),y(4,C.i6),y(5,b.i),y(6,S.d),y(7,w.b)],D)},41287:(e,t,i)=>{i.r(t),i.d(t,{ExpandLineSelectionAction:()=>a});var n=i(48077),o=i(55880),s=i(44950),r=i(25206);class a extends n.R6{constructor(){super({id:"expandLineSelection",label:r.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:s.u.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,o.P.expandLineSelection(n,n.getCursorStates())),n.revealPrimaryCursor(i.source,!0)}}(0,n.Qr)(a)},90376:(e,t,i)=>{i.r(t),i.d(t,{AbstractCaseAction:()=>Z,AbstractDeleteAllToBoundaryAction:()=>Y,AbstractSortLinesAction:()=>F,CamelCaseAction:()=>oe,DeleteAllLeftAction:()=>q,DeleteAllRightAction:()=>G,DeleteDuplicateLinesAction:()=>W,DeleteLinesAction:()=>K,DuplicateSelectionAction:()=>E,IndentLinesAction:()=>B,InsertLineAfterAction:()=>Q,InsertLineBeforeAction:()=>z,JoinLinesAction:()=>$,KebabCaseAction:()=>se,LowerCaseAction:()=>ee,SnakeCaseAction:()=>ne,SortLinesAscendingAction:()=>H,SortLinesDescendingAction:()=>U,TitleCaseAction:()=>ie,TransposeAction:()=>J,TrimTrailingWhitespaceAction:()=>V,UpperCaseAction:()=>X});var n=i(56082),o=i(25109),s=i(48077),r=i(74816),a=i(38159),l=i(64360),d=i(90970),c=i(89999),u=i(33162),h=i(54644),g=i(44950);class p{constructor(e,t,i){this._selection=e,this._isCopyingDown=t,this._noop=i||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let i=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,i.startLineNumber<i.endLineNumber&&1===i.endColumn&&(this._endLineNumberDelta=1,i=i.setEndPosition(i.endLineNumber-1,e.getLineMaxColumn(i.endLineNumber-1)));const n=[];for(let s=i.startLineNumber;s<=i.endLineNumber;s++)n.push(e.getLineContent(s));const o=n.join("\n");""===o&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber+1,1),i.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new u.e(i.startLineNumber,1,i.startLineNumber,1),o+"\n"):t.addEditOperation(new u.e(i.endLineNumber,e.getLineMaxColumn(i.endLineNumber),i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),"\n"+o),this._selectionId=t.trackSelection(i),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=i.startLineNumber,t=i.startColumn,n=i.endLineNumber,o=i.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(n+=this._endLineNumberDelta,o=1),i=h.Y.createWithDirection(e,t,n,o,this._selectionDirection)}return i}}var m=i(61720),f=i(85175),v=i(11432),C=i(97297),b=i(28649),_=i(52185),S=i(74177),w=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,n){t(i,n,e)}};let L=class{constructor(e,t,i,n){this._languageConfigurationService=n,this._selection=e,this._isMovingDown=t,this._autoIndent=i,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const i=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===i)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let n=this._selection;n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._moveEndPositionDown=!0,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const{tabSize:o,indentSize:s,insertSpaces:r}=e.getOptions(),a=this.buildIndentConverter(o,s,r),l={tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,i)=>e.getLanguageIdAtPosition(t,i)},getLineContent:null};if(n.startLineNumber===n.endLineNumber&&1===e.getLineMaxColumn(n.startLineNumber)){const i=n.startLineNumber,o=this._isMovingDown?i+1:i-1;1===e.getLineMaxColumn(o)?t.addEditOperation(new u.e(1,1,1,1),null):(t.addEditOperation(new u.e(i,1,i,1),e.getLineContent(o)),t.addEditOperation(new u.e(o,1,o,e.getLineMaxColumn(o)),null)),n=new h.Y(o,1,o,1)}else{let i,s;if(this._isMovingDown){i=n.endLineNumber+1,s=e.getLineContent(i),t.addEditOperation(new u.e(i-1,e.getLineMaxColumn(i-1),i,e.getLineMaxColumn(i)),null);let d=s;if(this.shouldAutoIndent(e,n)){const c=this.matchEnterRule(e,a,o,i,n.startLineNumber-1);if(null!==c){const t=m.V8(e.getLineContent(i)),n=c+b.Y(t,o),a=b.J(n,o,r);d=a+this.trimLeft(s)}else{l.getLineContent=t=>t===n.startLineNumber?e.getLineContent(i):e.getLineContent(t);const t=(0,_.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber,a,this._languageConfigurationService);if(null!==t){const n=m.V8(e.getLineContent(i)),a=b.Y(t,o),l=b.Y(n,o);if(a!==l){const e=b.J(a,o,r);d=e+this.trimLeft(s)}}}t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n");const h=this.matchEnterRuleMovingDown(e,a,o,n.startLineNumber,i,d);if(null!==h)0!==h&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,h);else{l.getLineContent=t=>t===n.startLineNumber?d:t>=n.startLineNumber+1&&t<=n.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);const s=(0,_.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(i,1),n.startLineNumber+1,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=b.Y(s,o),l=b.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}else t.addEditOperation(new u.e(n.startLineNumber,1,n.startLineNumber,1),d+"\n")}else if(i=n.startLineNumber-1,s=e.getLineContent(i),t.addEditOperation(new u.e(i,1,i+1,1),null),t.addEditOperation(new u.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+s),this.shouldAutoIndent(e,n)){l.getLineContent=t=>t===i?e.getLineContent(n.startLineNumber):e.getLineContent(t);const s=this.matchEnterRule(e,a,o,n.startLineNumber,n.startLineNumber-2);if(null!==s)0!==s&&this.getIndentEditsOfMovingBlock(e,t,n,o,r,s);else{const s=(0,_.n8)(this._autoIndent,l,e.getLanguageIdAtPosition(n.startLineNumber,1),i,a,this._languageConfigurationService);if(null!==s){const i=m.V8(e.getLineContent(n.startLineNumber)),a=b.Y(s,o),l=b.Y(i,o);if(a!==l){const i=a-l;this.getIndentEditsOfMovingBlock(e,t,n,o,r,i)}}}}}this._selectionId=t.trackSelection(n)}buildIndentConverter(e,t,i){return{shiftIndent:n=>f.U.shiftIndent(n,n.length+1,e,t,i),unshiftIndent:n=>f.U.unshiftIndent(n,n.length+1,e,t,i)}}parseEnterResult(e,t,i,n,o){if(o){let s=o.indentation;o.indentAction===v.wU.None||o.indentAction===v.wU.Indent?s=o.indentation+o.appendText:o.indentAction===v.wU.IndentOutdent?s=o.indentation:o.indentAction===v.wU.Outdent&&(s=t.unshiftIndent(o.indentation)+o.appendText);const r=e.getLineContent(n);if(this.trimLeft(r).indexOf(this.trimLeft(s))>=0){const o=m.V8(e.getLineContent(n));let r=m.V8(s);const a=(0,_.tI)(e,n,this._languageConfigurationService);null!==a&&2&a&&(r=t.unshiftIndent(r));const l=b.Y(r,i),d=b.Y(o,i);return l-d}}return null}matchEnterRuleMovingDown(e,t,i,n,o,s){if(m.ow(s)>=0){const s=e.getLineMaxColumn(o),r=(0,S.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}{let o=n-1;while(o>=1){const t=e.getLineContent(o),i=m.ow(t);if(i>=0)break;o--}if(o<1||n>e.getLineCount())return null;const s=e.getLineMaxColumn(o),r=(0,S.A)(this._autoIndent,e,new u.e(o,s,o,s),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,r)}}matchEnterRule(e,t,i,n,o,s){let r=o;while(r>=1){let t;t=r===o&&void 0!==s?s:e.getLineContent(r);const i=m.ow(t);if(i>=0)break;r--}if(r<1||n>e.getLineCount())return null;const a=e.getLineMaxColumn(r),l=(0,S.A)(this._autoIndent,e,new u.e(r,a,r,a),this._languageConfigurationService);return this.parseEnterResult(e,t,i,n,l)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const i=e.getLanguageIdAtPosition(t.startLineNumber,1),n=e.getLanguageIdAtPosition(t.endLineNumber,1);return i===n&&null!==this._languageConfigurationService.getLanguageConfiguration(i).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,i,n,o,s){for(let r=i.startLineNumber;r<=i.endLineNumber;r++){const a=e.getLineContent(r),l=m.V8(a),d=b.Y(l,n),c=d+s,h=b.J(c,n,o);h!==l&&(t.addEditOperation(new u.e(r,1,r,l.length+1),h),r===i.endLineNumber&&i.endColumn<=l.length+1&&""===h&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let i=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(i=i.setEndPosition(i.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&i.startLineNumber<i.endLineNumber&&(i=i.setEndPosition(i.endLineNumber,2)),i}};L=w([x(3,C.c_)],L);class y{static getCollator(){return y._COLLATOR||(y._COLLATOR=new Intl.Collator),y._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const i=N(e,this.selection,this.descending);i&&t.addEditOperation(i.range,i.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,i){if(null===e)return!1;const n=I(e,t,i);if(!n)return!1;for(let o=0,s=n.before.length;o<s;o++)if(n.before[o]!==n.after[o])return!0;return!1}}function I(e,t,i){const n=t.startLineNumber;let o=t.endLineNumber;if(1===t.endColumn&&o--,n>=o)return null;const s=[];for(let a=n;a<=o;a++)s.push(e.getLineContent(a));let r=s.slice(0);return r.sort(y.getCollator().compare),!0===i&&(r=r.reverse()),{startLineNumber:n,endLineNumber:o,before:s,after:r}}function N(e,t,i){const n=I(e,t,i);return n?d.h.replace(new u.e(n.startLineNumber,1,n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),n.after.join("\n")):null}y._COLLATOR=null;var M=i(25206),T=i(82693);class D extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const i=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));i.sort(((e,t)=>u.e.compareRangesUsingStarts(e.selection,t.selection)));let n=i[0];for(let s=1;s<i.length;s++){const e=i[s];n.selection.endLineNumber===e.selection.startLineNumber&&(n.index<e.index?e.ignore=!0:(n.ignore=!0,n=e))}const o=[];for(const s of i)o.push(new p(s.selection,this.down,s.ignore));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class R extends D{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:M.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}class A extends D{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:M.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}class E extends s.R6{constructor(){super({id:"editor.action.duplicateSelection",label:M.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:g.u.writable,menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,i){if(!t.hasModel())return;const n=[],o=t.getSelections(),s=t.getModel();for(const a of o)if(a.isEmpty())n.push(new p(a,!0));else{const e=new h.Y(a.endLineNumber,a.endColumn,a.endLineNumber,a.endColumn);n.push(new r.OY(e,s.getValueInRange(a)))}t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class O extends s.R6{constructor(e,t){super(t),this.down=e}run(e,t){const i=e.get(C.c_),n=[],o=t.getSelections()||[],s=t.getOption(9);for(const r of o)n.push(new L(r,this.down,s,i));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class P extends O{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:M.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}class k extends O{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:M.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:T.eH.MenubarSelectionMenu,group:"2_line",title:M.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}class F extends s.R6{constructor(e,t){super(t),this.descending=e}run(e,t){const i=t.getSelections()||[];for(const o of i)if(!y.canRun(t.getModel(),o,this.descending))return;const n=[];for(let o=0,s=i.length;o<s;o++)n[o]=new y(i[o],this.descending);t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}class H extends F{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:M.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:g.u.writable})}}class U extends F{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:M.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:g.u.writable})}}class W extends s.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:M.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:g.u.writable})}run(e,t){if(!t.hasModel())return;const i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;const n=[],o=[];let s=0;for(const r of t.getSelections()){const e=new Set,t=[];for(let n=r.startLineNumber;n<=r.endLineNumber;n++){const o=i.getLineContent(n);e.has(o)||(t.push(o),e.add(o))}const a=new h.Y(r.startLineNumber,1,r.endLineNumber,i.getLineMaxColumn(r.endLineNumber)),l=r.startLineNumber-s,c=new h.Y(l,1,l+t.length-1,t[t.length-1].length);n.push(d.h.replace(a,t.join("\n"))),o.push(c),s+=r.endLineNumber-r.startLineNumber+1-t.length}t.pushUndoStop(),t.executeEdits(this.id,n,o),t.pushUndoStop()}}class V extends s.R6{constructor(){super({id:V.ID,label:M.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:(0,n.gx)(2089,2102),weight:100}})}run(e,t,i){let n=[];"auto-save"===i.reason&&(n=(t.getSelections()||[]).map((e=>new c.L(e.positionLineNumber,e.positionColumn))));const o=t.getSelection();if(null===o)return;const s=new a.V(o,n);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop()}}V.ID="editor.action.trimTrailingWhitespace";class K extends s.R6{constructor(){super({id:"editor.action.deleteLines",label:M.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const i=this._getLinesToRemove(t),n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;let o=0;const s=[],r=[];for(let a=0,l=i.length;a<l;a++){const e=i[a];let t=e.startLineNumber,l=e.endLineNumber,c=1,u=n.getLineMaxColumn(l);l<n.getLineCount()?(l+=1,u=1):t>1&&(t-=1,c=n.getLineMaxColumn(t)),s.push(d.h.replace(new h.Y(t,c,l,u),"")),r.push(new h.Y(t-o,e.positionColumn,t-o,e.positionColumn)),o+=e.endLineNumber-e.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,s,r),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));const i=[];let n=t[0];for(let o=1;o<t.length;o++)n.endLineNumber+1>=t[o].startLineNumber?n.endLineNumber=t[o].endLineNumber:(i.push(n),n=t[o]);return i.push(n),i}}class B extends s.R6{constructor(){super({id:"editor.action.indentLines",label:M.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2137,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.indent(i.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class j extends s.R6{constructor(){super({id:"editor.action.outdentLines",label:M.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2135,weight:100}})}run(e,t){o.wk.Outdent.runEditorCommand(e,t,null)}}class z extends s.R6{constructor(){super({id:"editor.action.insertLineBefore",label:M.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertBefore(i.cursorConfig,t.getModel(),t.getSelections())))}}class Q extends s.R6{constructor(){super({id:"editor.action.insertLineAfter",label:M.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){const i=t._getViewModel();i&&(t.pushUndoStop(),t.executeCommands(this.id,l.u6.lineInsertAfter(i.cursorConfig,t.getModel(),t.getSelections())))}}class Y extends s.R6{run(e,t){if(!t.hasModel())return;const i=t.getSelection(),n=this._getRangesToDelete(t),o=[];for(let a=0,l=n.length-1;a<l;a++){const e=n[a],t=n[a+1];null===u.e.intersectRanges(e,t)?o.push(e):n[a+1]=u.e.plusRange(e,t)}o.push(n[n.length-1]);const s=this._getEndCursorState(i,o),r=o.map((e=>d.h.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,r,s),t.pushUndoStop()}}class q extends Y{constructor(){super({id:"deleteAllLeft",label:M.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];let o=0;return t.forEach((t=>{let s;if(1===t.endColumn&&o>0){const e=t.startLineNumber-o;s=new h.Y(e,t.startColumn,e,t.startColumn)}else s=new h.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);o+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?i=s:n.push(s)})),i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getSelections();if(null===t)return[];let i=t;const n=e.getModel();return null===n?[]:(i.sort(u.e.compareRangesUsingStarts),i=i.map((e=>{if(e.isEmpty()){if(1===e.startColumn){const t=Math.max(1,e.startLineNumber-1),i=1===e.startLineNumber?1:n.getLineContent(t).length+1;return new u.e(t,i,e.startLineNumber,1)}return new u.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new u.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),i)}}class G extends Y{constructor(){super({id:"deleteAllRight",label:M.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:g.u.writable,kbOpts:{kbExpr:g.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let i=null;const n=[];for(let o=0,s=t.length,r=0;o<s;o++){const s=t[o],a=new h.Y(s.startLineNumber-r,s.startColumn,s.startLineNumber-r,s.startColumn);s.intersectRanges(e)?i=a:n.push(a)}return i&&n.unshift(i),n}_getRangesToDelete(e){const t=e.getModel();if(null===t)return[];const i=e.getSelections();if(null===i)return[];const n=i.map((e=>{if(e.isEmpty()){const i=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===i?new u.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new u.e(e.startLineNumber,e.startColumn,e.startLineNumber,i)}return e}));return n.sort(u.e.compareRangesUsingStarts),n}}class $ extends s.R6{constructor(){super({id:"editor.action.joinLines",label:M.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:g.u.writable,kbOpts:{kbExpr:g.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const i=t.getSelections();if(null===i)return;let n=t.getSelection();if(null===n)return;i.sort(u.e.compareRangesUsingStarts);const o=[],s=i.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(n.equalsSelection(e)&&(n=t),t):t.startLineNumber>e.endLineNumber+1?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(o.push(e),t):new h.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));o.push(s);const r=t.getModel();if(null===r)return;const a=[],l=[];let c=n,g=0;for(let p=0,m=o.length;p<m;p++){const e=o[p],t=e.startLineNumber,i=1;let s,m,f=0;const v=r.getLineContent(e.endLineNumber).length-e.endColumn;if(e.isEmpty()||e.startLineNumber===e.endLineNumber){const i=e.getStartPosition();i.lineNumber<r.getLineCount()?(s=t+1,m=r.getLineMaxColumn(s)):(s=i.lineNumber,m=r.getLineMaxColumn(i.lineNumber))}else s=e.endLineNumber,m=r.getLineMaxColumn(s);let C=r.getLineContent(t);for(let n=t+1;n<=s;n++){const e=r.getLineContent(n),t=r.getLineFirstNonWhitespaceColumn(n);if(t>=1){let i=!0;""===C&&(i=!1),!i||" "!==C.charAt(C.length-1)&&"\t"!==C.charAt(C.length-1)||(i=!1,C=C.replace(/[\s\uFEFF\xA0]+$/g," "));const n=e.substr(t-1);C+=(i?" ":"")+n,f=i?n.length+1:n.length}else f=0}const b=new u.e(t,i,s,m);if(!b.isEmpty()){let i;e.isEmpty()?(a.push(d.h.replace(b,C)),i=new h.Y(b.startLineNumber-g,C.length-f+1,t-g,C.length-f+1)):e.startLineNumber===e.endLineNumber?(a.push(d.h.replace(b,C)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.endLineNumber-g,e.endColumn)):(a.push(d.h.replace(b,C)),i=new h.Y(e.startLineNumber-g,e.startColumn,e.startLineNumber-g,C.length-v)),null!==u.e.intersectRanges(b,n)?c=i:l.push(i)}g+=b.endLineNumber-b.startLineNumber}l.unshift(c),t.pushUndoStop(),t.executeEdits(this.id,a,l),t.pushUndoStop()}}class J extends s.R6{constructor(){super({id:"editor.action.transpose",label:M.NC("editor.transpose","Transpose characters around the cursor"),alias:"Transpose characters around the cursor",precondition:g.u.writable})}run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=[];for(let s=0,a=i.length;s<a;s++){const e=i[s];if(!e.isEmpty())continue;const t=e.getStartPosition(),a=n.getLineMaxColumn(t.lineNumber);if(t.column>=a){if(t.lineNumber===n.getLineCount())continue;const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.T4(new h.Y(t.lineNumber,Math.max(1,t.column-1),t.lineNumber+1,1),i))}else{const e=new u.e(t.lineNumber,Math.max(1,t.column-1),t.lineNumber,t.column+1),i=n.getValueInRange(e).split("").reverse().join("");o.push(new r.hP(e,i,new h.Y(t.lineNumber,t.column+1,t.lineNumber,t.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}class Z extends s.R6{run(e,t){const i=t.getSelections();if(null===i)return;const n=t.getModel();if(null===n)return;const o=t.getOption(124),s=[];for(const r of i)if(r.isEmpty()){const e=r.getStartPosition(),i=t.getConfiguredWordAtPosition(e);if(!i)continue;const a=new u.e(e.lineNumber,i.startColumn,e.lineNumber,i.endColumn),l=n.getValueInRange(a);s.push(d.h.replace(a,this._modifyText(l,o)))}else{const e=n.getValueInRange(r);s.push(d.h.replace(r,this._modifyText(e,o)))}t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop()}}class X extends Z{constructor(){super({id:"editor.action.transformToUppercase",label:M.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}class ee extends Z{constructor(){super({id:"editor.action.transformToLowercase",label:M.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:g.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}class te{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class ie extends Z{constructor(){super({id:"editor.action.transformToTitlecase",label:M.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:g.u.writable})}_modifyText(e,t){const i=ie.titleBoundary.get();return i?e.toLocaleLowerCase().replace(i,(e=>e.toLocaleUpperCase())):e}}ie.titleBoundary=new te("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class ne extends Z{constructor(){super({id:"editor.action.transformToSnakecase",label:M.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:g.u.writable})}_modifyText(e,t){const i=ne.caseBoundary.get(),n=ne.singleLetters.get();return i&&n?e.replace(i,"$1_$2").replace(n,"$1_$2$3").toLocaleLowerCase():e}}ne.caseBoundary=new te("(\\p{Ll})(\\p{Lu})","gmu"),ne.singleLetters=new te("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class oe extends Z{constructor(){super({id:"editor.action.transformToCamelcase",label:M.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:g.u.writable})}_modifyText(e,t){const i=oe.wordBoundary.get();if(!i)return e;const n=e.split(i),o=n.shift();return o+n.map((e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1))).join("")}}oe.wordBoundary=new te("[_\\s-]","gm");class se extends Z{static isSupported(){const e=[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((e=>e.isSupported()));return e}constructor(){super({id:"editor.action.transformToKebabcase",label:M.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:g.u.writable})}_modifyText(e,t){const i=se.caseBoundary.get(),n=se.singleLetters.get(),o=se.underscoreBoundary.get();return i&&n&&o?e.replace(o,"$1-$3").replace(i,"$1-$2").replace(n,"$1-$2").toLocaleLowerCase():e}}se.caseBoundary=new te("(\\p{Ll})(\\p{Lu})","gmu"),se.singleLetters=new te("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),se.underscoreBoundary=new te("(\\S)(_)(\\S)","gm"),(0,s.Qr)(R),(0,s.Qr)(A),(0,s.Qr)(E),(0,s.Qr)(P),(0,s.Qr)(k),(0,s.Qr)(H),(0,s.Qr)(U),(0,s.Qr)(W),(0,s.Qr)(V),(0,s.Qr)(K),(0,s.Qr)(B),(0,s.Qr)(j),(0,s.Qr)(z),(0,s.Qr)(Q),(0,s.Qr)(q),(0,s.Qr)(G),(0,s.Qr)($),(0,s.Qr)(J),(0,s.Qr)(X),(0,s.Qr)(ee),ne.caseBoundary.isSupported()&&ne.singleLetters.isSupported()&&(0,s.Qr)(ne),oe.wordBoundary.isSupported()&&(0,s.Qr)(oe),ie.titleBoundary.isSupported()&&(0,s.Qr)(ie),se.isSupported()&&(0,s.Qr)(se)},69225:(e,t,i)=>{i.r(t),i.d(t,{CONTEXT_ONTYPE_RENAME_INPUT_VISIBLE:()=>M,LinkedEditingAction:()=>R,LinkedEditingContribution:()=>D,editorLinkedEditingBackground:()=>O});var n=i(21921),o=i(85398),s=i(55191),r=i(60204),a=i(98642),l=i(11271),d=i(70959),c=i(61720),u=i(95896),h=i(48077),g=i(35195),p=i(89999),m=i(33162),f=i(44950),v=i(16375),C=i(97297),b=i(25206),_=i(66538),S=i(16458),w=i(47277),x=i(54732),L=i(96729),y=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},I=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const M=new _.uy("LinkedEditingInputVisible",!1),T="linked-editing-decoration";let D=class e extends d.JT{static get(t){return t.getContribution(e.ID)}constructor(e,t,i,n,o){super(),this.languageConfigurationService=n,this._syncRangesToken=0,this._localToDispose=this._register(new d.SL),this._editor=e,this._providers=i.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=M.bindTo(t),this._debounceInformation=o.for(this._providers,"Linked Editing",{min:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new d.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequest=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(66)||e.hasChanged(87))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),i=null!==t&&(this._editor.getOption(66)||this._editor.getOption(87))&&this._providers.has(t);if(i===this._enabled&&!e)return;if(this._enabled=i,this.clearRanges(),this._localToDispose.clear(),!i||null===t)return;this._localToDispose.add(l.ju.runAndSubscribe(t.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()})));const n=new o.vp(this._debounceInformation.get(t)),s=()=>{var e;this._rangeUpdateTriggerPromise=n.trigger((()=>this.updateRanges()),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(t))},r=new o.vp(0),a=e=>{this._rangeSyncTriggerPromise=r.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{s()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const t=this._currentDecorations.getRange(0);if(t&&e.changes.every((e=>t.intersectRanges(e.range))))return void a(this._syncRangesToken)}s()}))),this._localToDispose.add({dispose:()=>{n.dispose(),r.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||0===this._currentDecorations.length)return;const t=this._editor.getModel(),i=this._currentDecorations.getRange(0);if(!i||i.startLineNumber!==i.endLineNumber)return this.clearRanges();const n=t.getValueInRange(i);if(this._currentWordPattern){const e=n.match(this._currentWordPattern),t=e?e[0].length:0;if(t!==n.length)return this.clearRanges()}const o=[];for(let s=1,r=this._currentDecorations.length;s<r;s++){const e=this._currentDecorations.getRange(s);if(e)if(e.startLineNumber!==e.endLineNumber)o.push({range:e,text:n});else{let i=t.getValueInRange(e),s=n,r=e.startColumn,a=e.endColumn;const l=c.Mh(i,s);r+=l,i=i.substr(l),s=s.substr(l);const d=c.P1(i,s);a-=d,i=i.substr(0,i.length-d),s=s.substr(0,s.length-d),r===a&&0===s.length||o.push({range:new m.e(e.startLineNumber,r,e.endLineNumber,a),text:s})}}if(0!==o.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",o),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequest&&(this._currentRequest.cancel(),this._currentRequest=null,this._currentRequestPosition=null)}updateRanges(t=!1){return N(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return void this.clearRanges();const i=this._editor.getPosition();if(!this._enabled&&!t||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),s=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===s){if(i.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(i))return}}this._currentRequestPosition=i,this._currentRequestModelVersion=s;const r=(0,o.PG)((t=>N(this,void 0,void 0,(function*(){try{const o=new L.G(!1),a=yield E(this._providers,n,i,t);if(this._debounceInformation.update(n,o.elapsed()),r!==this._currentRequest)return;if(this._currentRequest=null,s!==n.getVersionId())return;let l=[];(null===a||void 0===a?void 0:a.ranges)&&(l=a.ranges),this._currentWordPattern=(null===a||void 0===a?void 0:a.wordPattern)||this._languageWordPattern;let d=!1;for(let e=0,t=l.length;e<t;e++)if(m.e.containsPosition(l[e],i)){if(d=!0,0!==e){const t=l[e];l.splice(e,1),l.unshift(t)}break}if(!d)return void this.clearRanges();const c=l.map((t=>({range:t,options:e.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations.set(c),this._syncRangesToken++}catch(o){(0,a.n2)(o)||(0,a.dL)(o),this._currentRequest!==r&&this._currentRequest||this.clearRanges()}}))));return this._currentRequest=r,r}))}};D.ID="editor.contrib.linkedEditing",D.DECORATION=v.qx.register({description:"linked-editing",stickiness:0,className:T}),D=y([I(1,_.i6),I(2,S.p),I(3,C.c_),I(4,x.A)],D);class R extends h.R6{constructor(){super({id:"editor.action.linkedEditing",label:b.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_.Ao.and(f.u.writable,f.u.hasRenameProvider),kbOpts:{kbExpr:f.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const i=e.get(g.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return u.o.isUri(n)&&p.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),a.dL):super.runCommand(e,t)}run(e,t){const i=D.get(t);return i?Promise.resolve(i.updateRanges(!0)):Promise.resolve()}}const A=h._l.bindToContribution(D.get);function E(e,t,i,s){const r=e.ordered(t);return(0,o.Ps)(r.map((e=>()=>N(this,void 0,void 0,(function*(){try{return yield e.provideLinkedEditingRanges(t,i,s)}catch(n){return void(0,a.Cp)(n)}})))),(e=>!!e&&n.Of(null===e||void 0===e?void 0:e.ranges)))}(0,h.fK)(new A({id:"cancelLinkedEditingInput",precondition:M,handler:e=>e.clearRanges(),kbOpts:{kbExpr:f.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));const O=(0,w.P6G)("editor.linkedEditingBackground",{dark:r.Il.fromHex("#f00").transparent(.3),light:r.Il.fromHex("#f00").transparent(.3),hcDark:r.Il.fromHex("#f00").transparent(.3),hcLight:r.Il.white},b.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,h.sb)("_executeLinkedEditingProvider",((e,t,i)=>{const{linkedEditingRangeProvider:n}=e.get(S.p);return E(n,t,i,s.T.None)})),(0,h._K)(D.ID,D,1),(0,h.Qr)(R)},86898:(e,t,i)=>{i.r(t);var n=i(70959),o=i(48077);class s extends n.JT{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>{const t=this._editor.getOption(111);t>=0&&6===e.target.type&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})})))}}s.ID="editor.contrib.longLinesHelper",(0,o._K)(s.ID,s,2)},92767:(e,t,i)=>{i.d(t,{$:()=>f});var n,o=i(8182),s=i(98642),r=i(11271),a=i(70959),l=i(6155),d=i(61141),c=i(32484),u=i(50960),h=i(6544),g=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,n){t(i,n,e)}},m=function(e,t,i,n){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function r(e){try{l(n.next(e))}catch(t){s(t)}}function a(e){try{l(n["throw"](e))}catch(t){s(t)}}function l(e){e.done?i(e.value):o(e.value).then(r,a)}l((n=n.apply(e,t||[])).next())}))};let f=class e{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new r.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){const e=document.createElement("span");return{element:e,dispose:()=>{}}}const n=new a.SL,s=n.add((0,o.a)(e,Object.assign(Object.assign({},this._getRenderOptions(e,n)),t),i));return{element:s.element,dispose:()=>n.dispose()}}_getRenderOptions(t,i){return{codeBlockRenderer:(t,i)=>m(this,void 0,void 0,(function*(){var n,o,s;let r;t?r=this._languageService.getLanguageIdByLanguageName(t):this._options.editor&&(r=null===(n=this._options.editor.getModel())||void 0===n?void 0:n.getLanguageId()),r||(r=c.bd);const a=yield(0,u.C2)(this._languageService,i,r),d=document.createElement("span");if(d.innerHTML=null!==(s=null===(o=e._ttpTokenizer)||void 0===o?void 0:o.createHTML(a))&&void 0!==s?s:a,this._options.editor){const e=this._options.editor.getOption(47);(0,l.N)(d,e)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(d.style.fontSize=this._options.codeBlockFontSize),d})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>v(this._openerService,e,t.isTrusted),disposables:i}}}};function v(e,t,i){return m(this,void 0,void 0,(function*(){try{return yield e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:C(i)})}catch(n){return(0,s.dL)(n),!1}}))}function C(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}f._ttpTokenizer=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("tokenizeToString",{createHTML(e){return e}}),f=g([p(1,d.O),p(2,h.v4)],f)},11898:(e,t,i)=>{i.d(t,{O:()=>h});var n=i(69332),o=i(85398),s=i(70959),r=i(48077),a=i(33162),l=i(25206),d=i(66538),c=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,n){t(i,n,e)}};let h=class e{static get(t){return t.getContribution(e.ID)}constructor(t,i){this._messageWidget=new s.XK,this._messageListeners=new s.SL,this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(i)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,n.Z9)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new p(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new o._F((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new a.e(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(p.fadeOut(this._messageWidget.value))}};h.ID="editor.contrib.messageController",h.MESSAGE_VISIBLE=new d.uy("messageVisible",!1,l.NC("messageVisible","Whether the editor is currently showing an inline message")),h=c([u(1,d.i6)],h);const g=r._l.bindToContribution(h.get);(0,r.fK)(new g({id:"leaveEditorMessage",precondition:h.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class p{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,{lineNumber:t,column:i},n){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:i},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const s=document.createElement("div");s.classList.add("message"),s.textContent=n,this._domNode.appendChild(s);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,r._K)(h.ID,h,4)},52394:(e,t,i)=>{i.r(t),i.d(t,{AddSelectionToNextFindMatchAction:()=>R,AddSelectionToPreviousFindMatchAction:()=>A,CompatChangeAll:()=>k,FocusNextCursor:()=>V,FocusPreviousCursor:()=>K,InsertCursorAbove:()=>w,InsertCursorBelow:()=>x,MoveSelectionToNextFindMatchAction:()=>E,MoveSelectionToPreviousFindMatchAction:()=>O,MultiCursorSelectionController:()=>T,MultiCursorSelectionControllerAction:()=>D,MultiCursorSession:()=>M,MultiCursorSessionResult:()=>N,SelectHighlightsAction:()=>P,SelectionHighlighter:()=>H});var n=i(69332),o=i(85398),s=i(56082),r=i(70959),a=i(48077),l=i(55880),d=i(33162),c=i(54644),u=i(44950),h=i(36691),g=i(25206),p=i(82693),m=i(66538),f=i(16458),v=i(79781),C=i(21881),b=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,n){t(i,n,e)}};function S(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===i.length?g.NC("cursorAdded","Cursor added: {0}",e):g.NC("cursorsAdded","Cursors added: {0}",e);(0,n.i7)(t)}}class w extends a.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:g.NC("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,l.P.addCursorUp(o,s,n)),o.revealTopMostCursor(i.source),S(s,o.getCursorStates())}}class x extends a.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:g.NC("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let n=!0;i&&!1===i.logicalLine&&(n=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const s=o.getCursorStates();o.setCursorStates(i.source,3,l.P.addCursorDown(o,s,n)),o.revealBottomMostCursor(i.source),S(s,o.getCursorStates())}}class L extends a.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:g.NC("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let n=e.startLineNumber;n<e.endLineNumber;n++){const e=t.getLineMaxColumn(n);i.push(new c.Y(n,e,n,e))}e.endColumn>1&&i.push(new c.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),n=t.getSelections(),o=t._getViewModel(),s=o.getCursorStates(),r=[];n.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),S(s,o.getCursorStates())}}class y extends a.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:g.NC("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=t.getModel().getLineCount(),o=[];for(let a=i[0].startLineNumber;a<=n;a++)o.push(new c.Y(a,i[0].startColumn,a,i[0].endColumn));const s=t._getViewModel(),r=s.getCursorStates();o.length>0&&t.setSelections(o),S(r,s.getCursorStates())}}class I extends a.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:g.NC("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),n=[];for(let r=i[0].startLineNumber;r>=1;r--)n.push(new c.Y(r,i[0].startColumn,r,i[0].endColumn));const o=t._getViewModel(),s=o.getCursorStates();n.length>0&&t.setSelections(n),S(s,o.getCursorStates())}}class N{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class M{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new M(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let n,o,s=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(s=!0,n=!0,o=!0):(n=i.wholeWord,o=i.matchCase);const a=e.getSelection();let l,d=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;l=t.word,d=new c.Y(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else l=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new M(e,t,s,l,n,o,d)}constructor(e,t,i,n,o,s,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=n,this.wholeWord=o,this.matchCase=s,this.currentMatch=r}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new N(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new N(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(124):null,!1);return i?new c.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new N(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new N(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(124):null,!1);return i?new c.Y(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(124):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(124):null,!1,1073741824)}}class T extends r.JT{static get(e){return e.getContribution(T.ID)}constructor(e){super(),this._sessionDispose=this._register(new r.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=M.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new c.Y(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState(),n=i.matchCase,o=U(this._editor.getModel(),t,n);if(!o){const e=this._editor.getModel(),i=[];for(let n=0,o=t.length;n<o;n++)i[n]=this._expandEmptyToWord(e,t[n]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(124):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(124):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let i=0,n=t.length;i<n;i++){const n=t[i],o=n.range.intersectRanges(e);if(o){t[i]=t[0],t[0]=n;break}}this._setSelections(t.map((e=>new c.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}T.ID="editor.contrib.multiCursorController";class D extends a.R6{run(e,t){const i=T.get(t);if(!i)return;const n=t._getViewModel();if(n){const o=n.getCursorStates(),s=h.pR.get(t);if(s)this._run(i,s);else{const n=e.get(C.TG).createInstance(h.pR,t);this._run(i,n),n.dispose()}S(o,n.getCursorStates())}}}class R extends D{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:g.NC("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:2082,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class A extends D{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:g.NC("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class E extends D{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:g.NC("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:(0,s.gx)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class O extends D{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:g.NC("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class P extends D{constructor(){super({id:"editor.action.selectHighlights",label:g.NC("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:3114,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:g.NC({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class k extends D{constructor(){super({id:"editor.action.changeAll",label:g.NC("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:m.Ao.and(u.u.writable,u.u.editorTextFocus),kbOpts:{kbExpr:u.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class F{constructor(e,t,i,n,o){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=n,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(d.e.compareRangesUsingStarts)),this._cachedFindMatches}}let H=class e extends r.JT{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(102),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new o.pY((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(102)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const i=h.pR.get(e);i&&this._register(i.getState().onFindReplaceStateChange((e=>{this._update()}))),this.updateSoon.schedule()}_update(){this._setState(e._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t)return null;if(!i.hasModel())return null;const n=i.getSelection();if(n.startLineNumber!==n.endLineNumber)return null;const o=T.get(i);if(!o)return null;const s=h.pR.get(i);if(!s)return null;let r=o.getSession(s);if(!r){const e=i.getSelections();if(e.length>1){const t=s.getState(),n=t.matchCase,o=U(i.getModel(),e,n);if(!o)return null}r=M.create(i,s)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const a=s.getState(),l=a.matchCase;if(a.isRevealed){let e=a.searchString;l||(e=e.toLowerCase());let t=r.searchText;if(l||(t=t.toLowerCase()),e===t&&r.matchCase===a.matchCase&&r.wholeWord===a.wholeWord&&!a.isRegex)return null}return new F(i.getModel(),r.searchText,r.matchCase,r.wholeWord?i.getOption(124):null,e)}_setState(e){if(this.state=e,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),n=this.editor.getSelections();n.sort(d.e.compareRangesUsingStarts);const o=[];for(let a=0,l=0,c=i.length,u=n.length;a<c;){const e=i[a];if(l>=u)o.push(e),a++;else{const t=d.e.compareRangesUsingStarts(e,n[l]);t<0?(!n[l].isEmpty()&&d.e.areIntersecting(e,n[l])||o.push(e),a++):(t>0||a++,l++)}}const s=this._languageFeaturesService.documentHighlightProvider.has(t)&&this.editor.getOption(77),r=o.map((e=>({range:e,options:(0,v.w)(s)})));this._decorations.set(r)}dispose(){this._setState(null),super.dispose()}};function U(e,t,i){const n=W(e,t[0],!i);for(let o=1,s=t.length;o<s;o++){const s=t[o];if(s.isEmpty())return!1;const r=W(e,s,!i);if(n!==r)return!1}return!0}function W(e,t,i){const n=e.getValueInRange(t);return i?n.toLowerCase():n}H.ID="editor.contrib.selectionHighlighter",H=b([_(1,f.p)],H);class V extends a.R6{constructor(){super({id:"editor.action.focusNextCursor",label:g.NC("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:g.NC("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),s=o.shift();s&&(o.push(s),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),S(o,n.getCursorStates()))}}class K extends a.R6{constructor(){super({id:"editor.action.focusPreviousCursor",label:g.NC("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:g.NC("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=Array.from(n.getCursorStates()),s=o.pop();s&&(o.unshift(s),n.setCursorStates(i.source,3,o),n.revealPrimaryCursor(i.source,!0),S(o,n.getCursorStates()))}}(0,a._K)(T.ID,T,4),(0,a._K)(H.ID,H,1),(0,a.Qr)(w),(0,a.Qr)(x),(0,a.Qr)(L),(0,a.Qr)(R),(0,a.Qr)(A),(0,a.Qr)(E),(0,a.Qr)(O),(0,a.Qr)(P),(0,a.Qr)(k),(0,a.Qr)(y),(0,a.Qr)(I),(0,a.Qr)(V),(0,a.Qr)(K)}}]);